{"ast":null,"code":"import React,{useMemo}from\"react\";import{Card,CardContent,CardHeader,CardTitle}from\"./ui/card\";import{Tooltip,TooltipContent,TooltipProvider,TooltipTrigger}from\"./ui/tooltip\";import{AlertTriangle,TrendingUp,DollarSign,Shield,Info,BarChart3,Activity,Target,AlertCircle}from\"lucide-react\";import{RISK_INDICATORS}from\"../constants/indicatorDescriptions\";import{calculateInstitutionalSmartMoneyScore,calculateInstitutionalTradingSignal,detectMarketRegime,calculateOptimalPositionSize,backtestSignalPerformance}from\"../utils/institutionalAnalytics\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function InstitutionalDashboard(_ref){var _tradingSignal$recomm,_tradingSignal$signal,_smartMoneyScore$scor,_tradingSignal$recomm2,_tradingSignal$recomm3,_tradingSignal$factor,_calculations$dailyVa,_calculations$sharpeR,_latest$_flows,_latest$_flows2,_latest$_flows3,_latest$_flows4,_latest$_flows5,_latest$_flows6,_optimalPosition$reas,_tradingSignal$recomm4,_tradingSignal$recomm5,_tradingSignal$riskMu;let{data,unitScale}=_ref;// Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ Í∞ÄÏ†ï Í∏àÏï° (ÏòàÏãú)\nconst FUND_SIZE=100000000;// 1ÏñµÏõê\nconst latestIndex=data.length-1;const latest=useMemo(()=>data[latestIndex]||{},[data,latestIndex]);// Advanced Analytics Calculations\nconst smartMoneyScore=useMemo(()=>{if(!data||data.length<20)return{score:50,breakdown:{},interpretation:'Îç∞Ïù¥ÌÑ∞ Î∂ÄÏ°±'};return calculateInstitutionalSmartMoneyScore(data,latestIndex);},[data,latestIndex]);const tradingSignal=useMemo(()=>{if(!data||data.length<20)return{signal:0,factors:[],positionSize:{},recommendation:{action:'WAIT',description:'Îç∞Ïù¥ÌÑ∞ ÏàòÏßë Ï§ë'},confidence:0};return calculateInstitutionalTradingSignal(data,latestIndex)||{signal:0,factors:[],positionSize:{},recommendation:{action:'WAIT',description:'Î∂ÑÏÑù Ï§ë'},confidence:0};},[data,latestIndex]);const marketRegime=useMemo(()=>{if(!data||data.length<20)return'UNKNOWN';return detectMarketRegime(data,latestIndex);},[data,latestIndex]);const optimalPosition=useMemo(()=>{if(!data||data.length<20)return{size:0,leverage:1,reasoning:['Îç∞Ïù¥ÌÑ∞ Î∂ÄÏ°±']};return calculateOptimalPositionSize(data,latestIndex,FUND_SIZE);},[data,latestIndex]);const signalBacktest=useMemo(()=>{if(data.length<100)return null;return backtestSignalPerformance(data);},[data]);// Î¶¨Ïä§ÌÅ¨ Í≥ÑÏÇ∞\nconst calculations=useMemo(()=>{if(!data||data.length<20)return{};// Î≥ÄÎèôÏÑ± Í≥ÑÏÇ∞ (20Ïùº)\nconst returns=[];for(let i=1;i<Math.min(data.length,21);i++){const ret=(data[i].close-data[i-1].close)/data[i-1].close;returns.push(ret);}const avgReturn=returns.reduce((a,b)=>a+b,0)/returns.length;const variance=returns.reduce((sum,ret)=>sum+Math.pow(ret-avgReturn,2),0)/returns.length;const volatility=Math.sqrt(variance)*Math.sqrt(252);// Ïó∞Ïú®Ìôî\n// VaR Í≥ÑÏÇ∞ (95% Ïã†Î¢∞ÏàòÏ§Ä)\nconst dailyVaR=volatility/Math.sqrt(252)*1.65;// ÏùºÌèâÍ∑† Í±∞ÎûòÎåÄÍ∏à (ÏµúÍ∑º 20Ïùº)\nconst avgVolume=data.slice(-20).reduce((sum,d)=>sum+d.close*d.volume,0)/20;// ÏµúÎåÄ ÏïàÏ†Ñ Í±∞Îûò Í∞ÄÎä• Í∏àÏï° (ÏùºÌèâÍ∑†Ïùò 5%)\nconst safeTradeSize=avgVolume*0.05;// ÌòÑÏû¨ Ìè¨ÏßÄÏÖò Í∞ÄÏ†ï (Ï†ÑÏ≤¥ ÌéÄÎìúÏùò 0.1%)\nconst positionSize=FUND_SIZE*0.001;const positionVaR=positionSize*dailyVaR;return{volatility:volatility*100,dailyVaR:dailyVaR*100,positionVaR,avgVolume,safeTradeSize,positionSize,sharpeRatio:avgReturn>0?avgReturn*252/volatility:0};},[data]);// Removed unused flowScore calculation as it's now replaced by smartMoneyScore\nconst formatKRW=num=>{const absNum=Math.abs(num);if(absNum>=1000000000000)return\"\".concat((num/1000000000000).toFixed(1),\"\\uC870\\uC6D0\");if(absNum>=100000000)return\"\".concat((num/100000000).toFixed(1),\"\\uC5B5\\uC6D0\");if(absNum>=10000)return\"\".concat((num/10000).toFixed(0),\"\\uB9CC\\uC6D0\");return\"\".concat(num.toLocaleString(),\"\\uC6D0\");};return/*#__PURE__*/_jsx(TooltipProvider,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold flex items-center gap-2\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-6 h-6\"}),\"AI \\uD22C\\uC790 \\uBD84\\uC11D \\uB300\\uC2DC\\uBCF4\\uB4DC\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-medium \".concat(marketRegime==='BULL_TRENDING'?'bg-green-100 text-green-800':marketRegime==='BEAR_TRENDING'?'bg-red-100 text-red-800':marketRegime==='HIGH_VOLATILITY'?'bg-orange-100 text-orange-800':marketRegime==='RANGE_BOUND'?'bg-gray-100 text-gray-800':marketRegime==='BREAKOUT_POTENTIAL'?'bg-purple-100 text-purple-800':'bg-blue-100 text-blue-800'),children:[\"\\uC2DC\\uC7A5 \\uC0C1\\uD0DC: \",marketRegime==='BULL_TRENDING'?'ÏÉÅÏäπ Ï∂îÏÑ∏':marketRegime==='BEAR_TRENDING'?'ÌïòÎùΩ Ï∂îÏÑ∏':marketRegime==='HIGH_VOLATILITY'?'Í≥†Î≥ÄÎèôÏÑ±':marketRegime==='RANGE_BOUND'?'Ìö°Î≥¥ Íµ¨Í∞Ñ':marketRegime==='BREAKOUT_POTENTIAL'?'ÎèåÌåå Í∞ÄÎä•':marketRegime==='TRANSITIONING'?'Ï†ÑÌôòÍ∏∞':'Î∂ÑÏÑù Ï§ë']})})]}),/*#__PURE__*/_jsxs(Card,{className:\"border-2 border-purple-300 bg-gradient-to-r from-purple-50 to-indigo-50\",children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(CardTitle,{className:\"text-lg font-bold\",children:\"\\uD83C\\uDFAF \\uD22C\\uC790 \\uACB0\\uC815 \\uAC00\\uC774\\uB4DC\"})}),/*#__PURE__*/_jsxs(CardContent,{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 p-4 bg-white rounded-lg border-2 border-gray-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold mb-3 text-center\",children:[\"\\uD604\\uC7AC \\uD22C\\uC790 \\uCD94\\uCC9C:\",/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 \".concat(((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>40?'text-green-600':((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>15?'text-green-500':((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>-15?'text-yellow-600':((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>-40?'text-orange-600':'text-red-600'),children:((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>40?'üü¢ Îß§Ïàò':((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>15?'üü¢ Î∂ÑÌï† Îß§Ïàò':((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>-15?'üü° Í¥ÄÎßù':((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>-40?'üü† ÎπÑÏ§ë Ï∂ïÏÜå':'üî¥ Îß§ÎèÑ'})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-sm text-gray-600\",children:((_tradingSignal$recomm=tradingSignal.recommendation)===null||_tradingSignal$recomm===void 0?void 0:_tradingSignal$recomm.description)||'Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù Ï§ë...'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(Tooltip,{children:[/*#__PURE__*/_jsx(TooltipTrigger,{children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-600 mb-2 cursor-help\",children:\"\\uC885\\uD569 \\uB9E4\\uB9E4 \\uC2E0\\uD638 \\u24D8\"})}),/*#__PURE__*/_jsxs(TooltipContent,{className:\"max-w-xs\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold mb-1\",children:\"\\uC885\\uD569 \\uB9E4\\uB9E4 \\uC2E0\\uD638\\uB780?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"-100(\\uAC15\\uB825 \\uB9E4\\uB3C4) ~ +100(\\uAC15\\uB825 \\uB9E4\\uC218)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-1\",children:\"+40 \\uC774\\uC0C1: \\uB9E4\\uC218 \\uCD94\\uCC9C\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"-40 \\uC774\\uD558: \\uB9E4\\uB3C4 \\uCD94\\uCC9C\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"-15 ~ +15: \\uAD00\\uB9DD \\uAD6C\\uAC04\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl font-bold mb-2 \".concat(((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>30?'text-green-600':((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)<-30?'text-red-600':'text-yellow-600'),children:((_tradingSignal$signal=tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)!==null&&_tradingSignal$signal!==void 0?_tradingSignal$signal:0).toFixed(0)}),/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-1 rounded-full text-sm font-medium inline-block \".concat(((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>40?'bg-green-600 text-white':((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>15?'bg-green-500 text-white':((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>-15?'bg-yellow-500 text-white':((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>-40?'bg-orange-500 text-white':'bg-red-600 text-white'),children:((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>40?'Îß§Ïàò':((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>15?'Î∂ÑÌï†Îß§Ïàò':((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>-15?'Í¥ÄÎßù':((tradingSignal===null||tradingSignal===void 0?void 0:tradingSignal.signal)||0)>-40?'ÎπÑÏ§ëÏ∂ïÏÜå':'Îß§ÎèÑ'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(Tooltip,{children:[/*#__PURE__*/_jsx(TooltipTrigger,{children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-600 mb-2 cursor-help\",children:\"\\uC2A4\\uB9C8\\uD2B8\\uBA38\\uB2C8 \\uC810\\uC218 \\u24D8\"})}),/*#__PURE__*/_jsxs(TooltipContent,{className:\"max-w-xs\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold mb-1\",children:\"\\uC2A4\\uB9C8\\uD2B8\\uBA38\\uB2C8 \\uC810\\uC218\\uB780?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"\\uAE30\\uAD00+\\uC678\\uAD6D\\uC778\\uC758 \\uC218\\uAE09 \\uAC15\\uB3C4\\uB97C \\uBD84\\uC11D\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-1\",children:\"80 \\uC774\\uC0C1: \\uAE30\\uAD00 \\uB300\\uB7C9 \\uB9E4\\uC9D1\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"65 \\uC774\\uC0C1: \\uC2A4\\uB9C8\\uD2B8\\uBA38\\uB2C8 \\uB9E4\\uC218 \\uC6B0\\uC704\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"35 \\uC774\\uD558: \\uC2A4\\uB9C8\\uD2B8\\uBA38\\uB2C8 \\uC774\\uD0C8\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"20 \\uC774\\uD558: \\uAE30\\uAD00 \\uB300\\uB7C9 \\uB9E4\\uB3C4\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl font-bold mb-2 \".concat(smartMoneyScore.score>65?'text-blue-600':smartMoneyScore.score<35?'text-red-600':'text-gray-600'),children:((_smartMoneyScore$scor=smartMoneyScore.score)===null||_smartMoneyScore$scor===void 0?void 0:_smartMoneyScore$scor.toFixed(0))||0}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600 px-2\",children:smartMoneyScore.interpretation})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(Tooltip,{children:[/*#__PURE__*/_jsx(TooltipTrigger,{children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-600 mb-2 cursor-help\",children:\"\\uCD5C\\uC801 \\uD3EC\\uC9C0\\uC158 \\uD06C\\uAE30 \\u24D8\"})}),/*#__PURE__*/_jsxs(TooltipContent,{className:\"max-w-xs\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold mb-1\",children:\"\\uD3EC\\uC9C0\\uC158 \\uD06C\\uAE30\\uB780?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Kelly Criterion \\uAE30\\uBC18 \\uACC4\\uC0B0\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"\\uBCC0\\uB3D9\\uC131\\uACFC \\uC2B9\\uB960\\uC744 \\uACE0\\uB824\\uD55C \\uCD5C\\uC801 \\uD22C\\uC790\\uAE08\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-indigo-600 mb-1\",children:formatKRW(optimalPosition.size)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-600\",children:[\"\\uB808\\uBC84\\uB9AC\\uC9C0: \",optimalPosition.leverage,\"x\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:((_tradingSignal$recomm2=tradingSignal.recommendation)===null||_tradingSignal$recomm2===void 0?void 0:_tradingSignal$recomm2.targetAllocation)||'Ìè¨Ìä∏Ìè¥Î¶¨Ïò§Ïùò 5-10%'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-purple-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"\\uC2E0\\uD638 \\uC2E0\\uB8B0\\uB3C4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold\",children:tradingSignal.confidence||((_tradingSignal$recomm3=tradingSignal.recommendation)===null||_tradingSignal$recomm3===void 0?void 0:_tradingSignal$recomm3.confidence)||'0%'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-purple-500 to-indigo-500 h-2 rounded-full transition-all duration-500\",style:{width:\"\".concat(tradingSignal.confidence||0,\"%\")}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-3 bg-blue-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-sm mb-2 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Info,{className:\"w-4 h-4\"}),\"\\uAE30\\uAC04\\uBCC4 \\uC810\\uC218 \\uD574\\uC11D \\uAC00\\uC774\\uB4DC\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-700 leading-relaxed\",children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"30\\uC77C/60\\uC77C\"}),\": \\uB2E8\\uAE30 \\uC218\\uAE09 \\uD750\\uB984 \\uBC18\\uC601, \\uB2E8\\uAE30 \\uD22C\\uC790\\uC5D0 \\uC801\\uD569\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"120\\uC77C\"}),\": \\uC911\\uAE30 \\uCD94\\uC138 \\uBC18\\uC601, \\uC2A4\\uC719 \\uD2B8\\uB808\\uC774\\uB529\\uC5D0 \\uC801\\uD569\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"240\\uC77C\"}),\": \\uC7A5\\uAE30 \\uD22C\\uC790 \\uAD00\\uC810, \\uD070 \\uADF8\\uB9BC \\uD30C\\uC545\\uC5D0 \\uC720\\uC6A9\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 \\uAE30\\uAC04\\uC774 \\uAE38\\uC218\\uB85D \\uB178\\uC774\\uC988\\uAC00 \\uC904\\uACE0 \\uC2E0\\uB8B0\\uB3C4\\uAC00 \\uB192\\uC544\\uC9D1\\uB2C8\\uB2E4\"]})]})]})]}),/*#__PURE__*/_jsxs(Card,{className:\"border-2 border-indigo-200\",children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsxs(CardTitle,{className:\"flex items-center gap-2 text-indigo-700\",children:[/*#__PURE__*/_jsx(Activity,{className:\"w-5 h-5\"}),\"\\uC138\\uBD80 \\uBD84\\uC11D \\uD56D\\uBAA9\"]})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-4\",children:(_tradingSignal$factor=tradingSignal.factors)===null||_tradingSignal$factor===void 0?void 0:_tradingSignal$factor.map((factor,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:factor.name}),/*#__PURE__*/_jsxs(Tooltip,{children:[/*#__PURE__*/_jsx(TooltipTrigger,{children:/*#__PURE__*/_jsx(Info,{className:\"w-3 h-3 text-gray-400\"})}),/*#__PURE__*/_jsxs(TooltipContent,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Weight: \",(factor.weight*100).toFixed(0),\"%\"]}),factor.description&&/*#__PURE__*/_jsx(\"p\",{children:factor.description})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-2 rounded-full transition-all duration-300 \".concat(factor.value>0?'bg-green-500':'bg-red-500'),style:{width:\"\".concat(Math.min(100,Math.abs(factor.value)),\"%\"),marginLeft:factor.value<0?'auto':'0'}})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold min-w-[3rem] text-right \".concat(factor.value>0?'text-green-600':factor.value<0?'text-red-600':'text-gray-600'),children:typeof factor.value==='number'?factor.value.toFixed(0):factor.value})]}),factor.phase&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:factor.phase})]},idx))}),signalBacktest&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-indigo-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium mb-2 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Target,{className:\"w-4 h-4\"}),\"\\uC2E0\\uD638 \\uC131\\uACFC (\\uCD5C\\uADFC 60\\uC77C)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\uC815\\uD655\\uB3C4:\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-bold text-lg\",children:[signalBacktest.accuracy.toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\uCD1D \\uC2E0\\uD638:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-lg\",children:signalBacktest.totalSignals})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\uC131\\uACF5:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-lg\",children:signalBacktest.correctSignals})]})]})]})]})]}),/*#__PURE__*/_jsxs(Card,{className:\"border-2 border-red-200\",children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsxs(CardTitle,{className:\"flex items-center gap-2 text-red-700\",children:[/*#__PURE__*/_jsx(Shield,{className:\"w-5 h-5\"}),\"\\uB9AC\\uC2A4\\uD06C \\uAD00\\uB9AC\"]})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-red-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold\",children:\"\\uC77C\\uC77C VaR\"}),/*#__PURE__*/_jsxs(Tooltip,{children:[/*#__PURE__*/_jsx(TooltipTrigger,{children:/*#__PURE__*/_jsx(Info,{className:\"w-4 h-4 text-gray-500\"})}),/*#__PURE__*/_jsxs(TooltipContent,{className:\"max-w-xs\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold mb-1\",children:RISK_INDICATORS.VaR.name}),/*#__PURE__*/_jsx(\"p\",{children:RISK_INDICATORS.VaR.expert})]})]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[(_calculations$dailyVa=calculations.dailyVaR)===null||_calculations$dailyVa===void 0?void 0:_calculations$dailyVa.toFixed(2),\"%\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\uD3EC\\uC9C0\\uC158 VaR: \",formatKRW(calculations.positionVaR||0)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-blue-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold\",children:\"\\uC720\\uB3D9\\uC131 \\uBD84\\uC11D\"}),/*#__PURE__*/_jsxs(Tooltip,{children:[/*#__PURE__*/_jsx(TooltipTrigger,{children:/*#__PURE__*/_jsx(Info,{className:\"w-4 h-4 text-gray-500\"})}),/*#__PURE__*/_jsxs(TooltipContent,{className:\"max-w-xs\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold mb-1\",children:RISK_INDICATORS.LIQUIDITY.name}),/*#__PURE__*/_jsx(\"p\",{children:RISK_INDICATORS.LIQUIDITY.expert})]})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"\\uC77C\\uD3C9\\uADE0 \\uAC70\\uB798\\uB300\\uAE08\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold\",children:formatKRW(calculations.avgVolume||0)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-600 mt-1\",children:[\"\\uC548\\uC804 \\uAC70\\uB798 \\uD55C\\uB3C4: \",formatKRW(calculations.safeTradeSize||0)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-green-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold\",children:\"\\uC0E4\\uD504 \\uBE44\\uC728\"}),/*#__PURE__*/_jsxs(Tooltip,{children:[/*#__PURE__*/_jsx(TooltipTrigger,{children:/*#__PURE__*/_jsx(Info,{className:\"w-4 h-4 text-gray-500\"})}),/*#__PURE__*/_jsxs(TooltipContent,{className:\"max-w-xs\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold mb-1\",children:RISK_INDICATORS.SHARPE.name}),/*#__PURE__*/_jsx(\"p\",{children:RISK_INDICATORS.SHARPE.expert})]})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-600\",children:((_calculations$sharpeR=calculations.sharpeRatio)===null||_calculations$sharpeR===void 0?void 0:_calculations$sharpeR.toFixed(2))||\"N/A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:calculations.sharpeRatio>2?\"Ïö∞Ïàò\":calculations.sharpeRatio>1?\"ÏñëÌò∏\":calculations.sharpeRatio>0.5?\"Î≥¥ÌÜµ\":\"ÎØ∏Ìù°\"})]})]}),calculations.dailyVaR>3&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-red-100 border border-red-300 rounded-lg flex items-center gap-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-5 h-5 text-red-600\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-700 font-medium\",children:\"\\uACBD\\uACE0: \\uB192\\uC740 \\uBCC0\\uB3D9\\uC131 \\uAC10\\uC9C0. \\uD3EC\\uC9C0\\uC158 \\uCD95\\uC18C\\uB97C \\uAC80\\uD1A0\\uD558\\uC138\\uC694.\"})]})]})]}),/*#__PURE__*/_jsxs(Card,{className:\"border-2 border-blue-200\",children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsxs(CardTitle,{className:\"flex items-center gap-2 text-blue-700\",children:[/*#__PURE__*/_jsx(DollarSign,{className:\"w-5 h-5\"}),\"\\uC2A4\\uB9C8\\uD2B8\\uBA38\\uB2C8 \\uC218\\uAE09 \\uBD84\\uC11D\"]})}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-3\",children:\"\\uC810\\uC218 \\uAD6C\\uC131 \\uD56D\\uBAA9\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-3\",children:Object.entries(smartMoneyScore.breakdown||{}).map(_ref2=>{let[key,value]=_ref2;const labels={flowIntensity:'ÏàòÍ∏â Í∞ïÎèÑ',persistence:'ÏßÄÏÜçÏÑ±',retailDivergence:'Í∞úÏù∏ Ïó≠Ìñâ',momentum:'ÎàÑÏ†Å Î™®Î©òÌÖÄ',volumeSignal:'Í±∞ÎûòÎüâ Ïã†Ìò∏',institutionalPattern:'Í∏∞Í¥Ä Ìå®ÌÑ¥',marketRegime:'ÏãúÏû• Î†àÏßê'};return/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600\",children:[labels[key]||key,\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 font-bold \".concat(typeof value==='number'&&value>0?'text-green-600':typeof value==='number'&&value<0?'text-red-600':'text-gray-600'),children:typeof value==='number'?value.toFixed(1):value})]},key);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium mb-2 flex items-center gap-2\",children:[\"\\uC2A4\\uB9C8\\uD2B8\\uBA38\\uB2C8 (\\uAE30\\uAD00+\\uC678\\uC778)\",/*#__PURE__*/_jsxs(Tooltip,{children:[/*#__PURE__*/_jsx(TooltipTrigger,{children:/*#__PURE__*/_jsx(Info,{className:\"w-4 h-4 text-gray-500\"})}),/*#__PURE__*/_jsxs(TooltipContent,{className:\"max-w-xs\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uC815\\uBCF4\\uB825\\uACFC \\uC790\\uAE08\\uB825\\uC744 \\uAC16\\uCD98 \\uC804\\uBB38 \\uD22C\\uC790\\uC790\\uB4E4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs\",children:\"\\uD30C\\uB780\\uC0C9: \\uB9E4\\uB3C4 / \\uBE68\\uAC04\\uC0C9: \\uB9E4\\uC218\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uC678\\uAD6D\\uC778\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold \".concat((((_latest$_flows=latest._flows)===null||_latest$_flows===void 0?void 0:_latest$_flows.Ïô∏Íµ≠Ïù∏Ìï©Í≥Ñ)||0)>0?'text-red-600':'text-blue-600'),children:formatKRW(((_latest$_flows2=latest._flows)===null||_latest$_flows2===void 0?void 0:_latest$_flows2.Ïô∏Íµ≠Ïù∏Ìï©Í≥Ñ)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uAE30\\uAD00\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold \".concat((((_latest$_flows3=latest._flows)===null||_latest$_flows3===void 0?void 0:_latest$_flows3.Í∏∞Í¥ÄÌï©Í≥Ñ)||0)>0?'text-red-600':'text-blue-600'),children:formatKRW(((_latest$_flows4=latest._flows)===null||_latest$_flows4===void 0?void 0:_latest$_flows4.Í∏∞Í¥ÄÌï©Í≥Ñ)||0)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium mb-2 flex items-center gap-2\",children:[\"\\uAC1C\\uC778 \\uD22C\\uC790\\uC790\",/*#__PURE__*/_jsxs(Tooltip,{children:[/*#__PURE__*/_jsx(TooltipTrigger,{children:/*#__PURE__*/_jsx(Info,{className:\"w-4 h-4 text-gray-500\"})}),/*#__PURE__*/_jsxs(TooltipContent,{className:\"max-w-xs\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uAC1C\\uC778 \\uD22C\\uC790\\uC790\\uB4E4\\uC758 \\uB9E4\\uB9E4 \\uD604\\uD669\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs\",children:\"\\uC2A4\\uB9C8\\uD2B8\\uBA38\\uB2C8\\uC640 \\uBC18\\uB300\\uB85C \\uC6C0\\uC9C1\\uC774\\uBA74 \\uAE0D\\uC815 \\uC2E0\\uD638\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uC21C\\uB9E4\\uC218\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold \".concat((((_latest$_flows5=latest._flows)===null||_latest$_flows5===void 0?void 0:_latest$_flows5.Í∞úÏù∏)||0)>0?'text-red-600':'text-blue-600'),children:formatKRW(((_latest$_flows6=latest._flows)===null||_latest$_flows6===void 0?void 0:_latest$_flows6.Í∞úÏù∏)||0)})]})})]})]})]})})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsxs(CardTitle,{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"w-5 h-5\"}),\"\\uB9AC\\uC2A4\\uD06C \\uC870\\uC815 \\uD3EC\\uC9C0\\uC158 \\uAD00\\uB9AC\"]})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium mb-2 flex items-center gap-2\",children:[\"\\uCD5C\\uC801 \\uD3EC\\uC9C0\\uC158 \\uD06C\\uAE30\",/*#__PURE__*/_jsxs(Tooltip,{children:[/*#__PURE__*/_jsx(TooltipTrigger,{children:/*#__PURE__*/_jsx(Info,{className:\"w-4 h-4 text-gray-400\"})}),/*#__PURE__*/_jsxs(TooltipContent,{className:\"max-w-xs\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Kelly Criterion\\uC744 \\uAE30\\uBC18\\uC73C\\uB85C \\uACC4\\uC0B0\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uC548\\uC804\\uC744 \\uC704\\uD574 1/4 Kelly \\uC801\\uC6A9\"})]})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-700 mb-2\",children:formatKRW(optimalPosition.size)}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1 text-xs text-gray-600\",children:(_optimalPosition$reas=optimalPosition.reasoning)===null||_optimalPosition$reas===void 0?void 0:_optimalPosition$reas.map((reason,idx)=>{const koreanLabels={'Kelly Fraction':'Kelly ÎπÑÏú®','Volatility Adjustment':'Î≥ÄÎèôÏÑ± Ï°∞Ï†ï','Win Rate':'ÏäπÎ•†','Risk-Adjusted Size':'Î¶¨Ïä§ÌÅ¨ Ï°∞Ï†ï ÌÅ¨Í∏∞','Insufficient loss data':'ÏÜêÏã§ Îç∞Ïù¥ÌÑ∞ Î∂ÄÏ°±','ÏµúÏÜå 20Ïùº Îç∞Ïù¥ÌÑ∞ ÌïÑÏöî':'ÏµúÏÜå 20Ïùº Îç∞Ïù¥ÌÑ∞ ÌïÑÏöî'};let translatedReason=reason;Object.entries(koreanLabels).forEach(_ref3=>{let[eng,kor]=_ref3;translatedReason=translatedReason.replace(eng,kor);});return/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u2022 \",translatedReason]},idx);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gradient-to-br from-red-50 to-orange-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium mb-2 flex items-center gap-2\",children:[\"\\uB3D9\\uC801 \\uB9AC\\uC2A4\\uD06C \\uAD00\\uB9AC\",/*#__PURE__*/_jsxs(Tooltip,{children:[/*#__PURE__*/_jsx(TooltipTrigger,{children:/*#__PURE__*/_jsx(Info,{className:\"w-4 h-4 text-gray-400\"})}),/*#__PURE__*/_jsxs(TooltipContent,{className:\"max-w-xs\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uC2DC\\uC7A5 \\uC0C1\\uD669\\uACFC \\uBCC0\\uB3D9\\uC131\\uC5D0 \\uB530\\uB77C\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uB9AC\\uC2A4\\uD06C \\uD55C\\uB3C4\\uAC00 \\uC790\\uB3D9 \\uC870\\uC815\\uB429\\uB2C8\\uB2E4\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"\\uC190\\uC808\\uC120:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-red-600\",children:((_tradingSignal$recomm4=tradingSignal.recommendation)===null||_tradingSignal$recomm4===void 0?void 0:_tradingSignal$recomm4.stopLoss)||'ÏßÑÏûÖÍ∞Ä -5%'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"\\uBAA9\\uD45C \\uBE44\\uC911:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-orange-600\",children:((_tradingSignal$recomm5=tradingSignal.recommendation)===null||_tradingSignal$recomm5===void 0?void 0:_tradingSignal$recomm5.targetAllocation)||'5-10%'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"\\uB9AC\\uC2A4\\uD06C \\uBC30\\uC218:\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-bold\",children:[((_tradingSignal$riskMu=tradingSignal.riskMultiplier)===null||_tradingSignal$riskMu===void 0?void 0:_tradingSignal$riskMu.toFixed(2))||'1.00',\"x\"]})]})]})]})]}),marketRegime==='HIGH_VOLATILITY'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-3 bg-orange-100 border border-orange-300 rounded-lg flex items-center gap-2\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-5 h-5 text-orange-600 flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-orange-700\",children:[\"\\uACE0\\uBCC0\\uB3D9\\uC131 \\uAC10\\uC9C0. \\uD3EC\\uC9C0\\uC158 \\uD06C\\uAE30\\uAC00 \\uC790\\uB3D9\\uC73C\\uB85C \",((1-(tradingSignal.riskMultiplier||0.7))*100).toFixed(0),\"% \\uAC10\\uC18C\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"]})]}),calculations.dailyVaR>4&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-3 bg-red-100 border border-red-300 rounded-lg flex items-center gap-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-5 h-5 text-red-600 flex-shrink-0\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700\",children:\"\\uADF9\\uB2E8\\uC801 \\uB9AC\\uC2A4\\uD06C \\uC218\\uC900. \\uB178\\uCD9C\\uB3C4\\uB97C \\uC904\\uC774\\uAC70\\uB098 \\uD5E4\\uC9C0\\uB97C \\uACE0\\uB824\\uD558\\uC138\\uC694.\"})]})]})]})]})});}","map":{"version":3,"names":["React","useMemo","Card","CardContent","CardHeader","CardTitle","Tooltip","TooltipContent","TooltipProvider","TooltipTrigger","AlertTriangle","TrendingUp","DollarSign","Shield","Info","BarChart3","Activity","Target","AlertCircle","RISK_INDICATORS","calculateInstitutionalSmartMoneyScore","calculateInstitutionalTradingSignal","detectMarketRegime","calculateOptimalPositionSize","backtestSignalPerformance","jsx","_jsx","jsxs","_jsxs","InstitutionalDashboard","_ref","_tradingSignal$recomm","_tradingSignal$signal","_smartMoneyScore$scor","_tradingSignal$recomm2","_tradingSignal$recomm3","_tradingSignal$factor","_calculations$dailyVa","_calculations$sharpeR","_latest$_flows","_latest$_flows2","_latest$_flows3","_latest$_flows4","_latest$_flows5","_latest$_flows6","_optimalPosition$reas","_tradingSignal$recomm4","_tradingSignal$recomm5","_tradingSignal$riskMu","data","unitScale","FUND_SIZE","latestIndex","length","latest","smartMoneyScore","score","breakdown","interpretation","tradingSignal","signal","factors","positionSize","recommendation","action","description","confidence","marketRegime","optimalPosition","size","leverage","reasoning","signalBacktest","calculations","returns","i","Math","min","ret","close","push","avgReturn","reduce","a","b","variance","sum","pow","volatility","sqrt","dailyVaR","avgVolume","slice","d","volume","safeTradeSize","positionVaR","sharpeRatio","formatKRW","num","absNum","abs","concat","toFixed","toLocaleString","children","className","targetAllocation","style","width","map","factor","idx","name","weight","value","marginLeft","phase","accuracy","totalSignals","correctSignals","VaR","expert","LIQUIDITY","SHARPE","Object","entries","_ref2","key","labels","flowIntensity","persistence","retailDivergence","momentum","volumeSignal","institutionalPattern","_flows","Ïô∏Íµ≠Ïù∏Ìï©Í≥Ñ","Í∏∞Í¥ÄÌï©Í≥Ñ","Í∞úÏù∏","reason","koreanLabels","translatedReason","forEach","_ref3","eng","kor","replace","stopLoss","riskMultiplier"],"sources":["C:/Users/kloud/OneDrive/Desktop/Paradise/src/components/InstitutionalDashboard.jsx"],"sourcesContent":["import React, { useMemo } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"./ui/card\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"./ui/tooltip\";\nimport { AlertTriangle, TrendingUp, DollarSign, Shield, Info, BarChart3, Activity, Target, AlertCircle } from \"lucide-react\";\nimport { RISK_INDICATORS } from \"../constants/indicatorDescriptions\";\nimport { \n  calculateInstitutionalSmartMoneyScore, \n  calculateInstitutionalTradingSignal,\n  detectMarketRegime,\n  calculateOptimalPositionSize,\n  backtestSignalPerformance\n} from \"../utils/institutionalAnalytics\";\n\nexport default function InstitutionalDashboard({ data, unitScale }) {\n  // Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ Í∞ÄÏ†ï Í∏àÏï° (ÏòàÏãú)\n  const FUND_SIZE = 100000000; // 1ÏñµÏõê\n  const latestIndex = data.length - 1;\n  const latest = useMemo(() => data[latestIndex] || {}, [data, latestIndex]);\n  \n  // Advanced Analytics Calculations\n  const smartMoneyScore = useMemo(() => {\n    if (!data || data.length < 20) return { score: 50, breakdown: {}, interpretation: 'Îç∞Ïù¥ÌÑ∞ Î∂ÄÏ°±' };\n    return calculateInstitutionalSmartMoneyScore(data, latestIndex);\n  }, [data, latestIndex]);\n  \n  const tradingSignal = useMemo(() => {\n    if (!data || data.length < 20) return { \n      signal: 0, \n      factors: [], \n      positionSize: {},\n      recommendation: { action: 'WAIT', description: 'Îç∞Ïù¥ÌÑ∞ ÏàòÏßë Ï§ë' },\n      confidence: 0\n    };\n    return calculateInstitutionalTradingSignal(data, latestIndex) || {\n      signal: 0,\n      factors: [],\n      positionSize: {},\n      recommendation: { action: 'WAIT', description: 'Î∂ÑÏÑù Ï§ë' },\n      confidence: 0\n    };\n  }, [data, latestIndex]);\n  \n  const marketRegime = useMemo(() => {\n    if (!data || data.length < 20) return 'UNKNOWN';\n    return detectMarketRegime(data, latestIndex);\n  }, [data, latestIndex]);\n  \n  const optimalPosition = useMemo(() => {\n    if (!data || data.length < 20) return { size: 0, leverage: 1, reasoning: ['Îç∞Ïù¥ÌÑ∞ Î∂ÄÏ°±'] };\n    return calculateOptimalPositionSize(data, latestIndex, FUND_SIZE);\n  }, [data, latestIndex]);\n  \n  const signalBacktest = useMemo(() => {\n    if (data.length < 100) return null;\n    return backtestSignalPerformance(data);\n  }, [data]);\n\n  // Î¶¨Ïä§ÌÅ¨ Í≥ÑÏÇ∞\n  const calculations = useMemo(() => {\n    if (!data || data.length < 20) return {};\n\n    // Î≥ÄÎèôÏÑ± Í≥ÑÏÇ∞ (20Ïùº)\n    const returns = [];\n    for (let i = 1; i < Math.min(data.length, 21); i++) {\n      const ret = (data[i].close - data[i-1].close) / data[i-1].close;\n      returns.push(ret);\n    }\n    \n    const avgReturn = returns.reduce((a, b) => a + b, 0) / returns.length;\n    const variance = returns.reduce((sum, ret) => sum + Math.pow(ret - avgReturn, 2), 0) / returns.length;\n    const volatility = Math.sqrt(variance) * Math.sqrt(252); // Ïó∞Ïú®Ìôî\n\n    // VaR Í≥ÑÏÇ∞ (95% Ïã†Î¢∞ÏàòÏ§Ä)\n    const dailyVaR = volatility / Math.sqrt(252) * 1.65;\n    \n    // ÏùºÌèâÍ∑† Í±∞ÎûòÎåÄÍ∏à (ÏµúÍ∑º 20Ïùº)\n    const avgVolume = data.slice(-20).reduce((sum, d) => sum + (d.close * d.volume), 0) / 20;\n    \n    // ÏµúÎåÄ ÏïàÏ†Ñ Í±∞Îûò Í∞ÄÎä• Í∏àÏï° (ÏùºÌèâÍ∑†Ïùò 5%)\n    const safeTradeSize = avgVolume * 0.05;\n    \n    // ÌòÑÏû¨ Ìè¨ÏßÄÏÖò Í∞ÄÏ†ï (Ï†ÑÏ≤¥ ÌéÄÎìúÏùò 0.1%)\n    const positionSize = FUND_SIZE * 0.001;\n    const positionVaR = positionSize * dailyVaR;\n\n    return {\n      volatility: volatility * 100,\n      dailyVaR: dailyVaR * 100,\n      positionVaR,\n      avgVolume,\n      safeTradeSize,\n      positionSize,\n      sharpeRatio: avgReturn > 0 ? (avgReturn * 252) / volatility : 0\n    };\n  }, [data]);\n\n  // Removed unused flowScore calculation as it's now replaced by smartMoneyScore\n\n  const formatKRW = (num) => {\n    const absNum = Math.abs(num);\n    if (absNum >= 1000000000000) return `${(num / 1000000000000).toFixed(1)}Ï°∞Ïõê`;\n    if (absNum >= 100000000) return `${(num / 100000000).toFixed(1)}ÏñµÏõê`;\n    if (absNum >= 10000) return `${(num / 10000).toFixed(0)}ÎßåÏõê`;\n    return `${num.toLocaleString()}Ïõê`;\n  };\n\n  return (\n    <TooltipProvider>\n      <div className=\"space-y-4\">\n        {/* Ìó§Îçî */}\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-2xl font-bold flex items-center gap-2\">\n            <BarChart3 className=\"w-6 h-6\" />\n            AI Ìà¨Ïûê Î∂ÑÏÑù ÎåÄÏãúÎ≥¥Îìú\n          </h2>\n          <div className=\"flex items-center gap-2\">\n            <span className={`px-3 py-1 rounded-full text-sm font-medium ${\n              marketRegime === 'BULL_TRENDING' ? 'bg-green-100 text-green-800' :\n              marketRegime === 'BEAR_TRENDING' ? 'bg-red-100 text-red-800' :\n              marketRegime === 'HIGH_VOLATILITY' ? 'bg-orange-100 text-orange-800' :\n              marketRegime === 'RANGE_BOUND' ? 'bg-gray-100 text-gray-800' :\n              marketRegime === 'BREAKOUT_POTENTIAL' ? 'bg-purple-100 text-purple-800' :\n              'bg-blue-100 text-blue-800'\n            }`}>\n              ÏãúÏû• ÏÉÅÌÉú: {marketRegime === 'BULL_TRENDING' ? 'ÏÉÅÏäπ Ï∂îÏÑ∏' :\n                      marketRegime === 'BEAR_TRENDING' ? 'ÌïòÎùΩ Ï∂îÏÑ∏' :\n                      marketRegime === 'HIGH_VOLATILITY' ? 'Í≥†Î≥ÄÎèôÏÑ±' :\n                      marketRegime === 'RANGE_BOUND' ? 'Ìö°Î≥¥ Íµ¨Í∞Ñ' :\n                      marketRegime === 'BREAKOUT_POTENTIAL' ? 'ÎèåÌåå Í∞ÄÎä•' :\n                      marketRegime === 'TRANSITIONING' ? 'Ï†ÑÌôòÍ∏∞' : 'Î∂ÑÏÑù Ï§ë'}\n            </span>\n          </div>\n        </div>\n        \n        {/* ÌïµÏã¨ Ìà¨Ïûê Ïã†Ìò∏ Ïπ¥Îìú */}\n        <Card className=\"border-2 border-purple-300 bg-gradient-to-r from-purple-50 to-indigo-50\">\n          <CardHeader>\n            <CardTitle className=\"text-lg font-bold\">üéØ Ìà¨Ïûê Í≤∞Ï†ï Í∞ÄÏù¥Îìú</CardTitle>\n          </CardHeader>\n          <CardContent className=\"p-6\">\n            {/* Îã®Ïàú Î™ÖÌôïÌïú Ìà¨Ïûê Í≤∞Ï†ï */}\n            <div className=\"mb-6 p-4 bg-white rounded-lg border-2 border-gray-200\">\n              <h3 className=\"text-lg font-bold mb-3 text-center\">\n                ÌòÑÏû¨ Ìà¨Ïûê Ï∂îÏ≤ú: \n                <span className={`ml-2 ${\n                  (tradingSignal?.signal || 0) > 40 ? 'text-green-600' :\n                  (tradingSignal?.signal || 0) > 15 ? 'text-green-500' :\n                  (tradingSignal?.signal || 0) > -15 ? 'text-yellow-600' :\n                  (tradingSignal?.signal || 0) > -40 ? 'text-orange-600' :\n                  'text-red-600'\n                }`}>\n                  {(tradingSignal?.signal || 0) > 40 ? 'üü¢ Îß§Ïàò' :\n                   (tradingSignal?.signal || 0) > 15 ? 'üü¢ Î∂ÑÌï† Îß§Ïàò' :\n                   (tradingSignal?.signal || 0) > -15 ? 'üü° Í¥ÄÎßù' :\n                   (tradingSignal?.signal || 0) > -40 ? 'üü† ÎπÑÏ§ë Ï∂ïÏÜå' :\n                   'üî¥ Îß§ÎèÑ'}\n                </span>\n              </h3>\n              <p className=\"text-center text-sm text-gray-600\">\n                {tradingSignal.recommendation?.description || 'Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù Ï§ë...'}\n              </p>\n            </div>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              {/* Ï¢ÖÌï© Îß§Îß§ Ïã†Ìò∏ */}\n              <div className=\"text-center\">\n                <Tooltip>\n                  <TooltipTrigger>\n                    <h3 className=\"text-sm font-medium text-gray-600 mb-2 cursor-help\">\n                      Ï¢ÖÌï© Îß§Îß§ Ïã†Ìò∏ ‚ìò\n                    </h3>\n                  </TooltipTrigger>\n                  <TooltipContent className=\"max-w-xs\">\n                    <p className=\"font-semibold mb-1\">Ï¢ÖÌï© Îß§Îß§ Ïã†Ìò∏ÎûÄ?</p>\n                    <p className=\"text-sm\">-100(Í∞ïÎ†• Îß§ÎèÑ) ~ +100(Í∞ïÎ†• Îß§Ïàò)</p>\n                    <p className=\"text-sm mt-1\">+40 Ïù¥ÏÉÅ: Îß§Ïàò Ï∂îÏ≤ú</p>\n                    <p className=\"text-sm\">-40 Ïù¥Ìïò: Îß§ÎèÑ Ï∂îÏ≤ú</p>\n                    <p className=\"text-sm\">-15 ~ +15: Í¥ÄÎßù Íµ¨Í∞Ñ</p>\n                  </TooltipContent>\n                </Tooltip>\n                <div className={`text-4xl font-bold mb-2 ${\n                  (tradingSignal?.signal || 0) > 30 ? 'text-green-600' :\n                  (tradingSignal?.signal || 0) < -30 ? 'text-red-600' :\n                  'text-yellow-600'\n                }`}>\n                  {(tradingSignal?.signal ?? 0).toFixed(0)}\n                </div>\n                <div className={`px-3 py-1 rounded-full text-sm font-medium inline-block ${\n                  (tradingSignal?.signal || 0) > 40 ? 'bg-green-600 text-white' :\n                  (tradingSignal?.signal || 0) > 15 ? 'bg-green-500 text-white' :\n                  (tradingSignal?.signal || 0) > -15 ? 'bg-yellow-500 text-white' :\n                  (tradingSignal?.signal || 0) > -40 ? 'bg-orange-500 text-white' :\n                  'bg-red-600 text-white'\n                }`}>\n                  {(tradingSignal?.signal || 0) > 40 ? 'Îß§Ïàò' :\n                   (tradingSignal?.signal || 0) > 15 ? 'Î∂ÑÌï†Îß§Ïàò' :\n                   (tradingSignal?.signal || 0) > -15 ? 'Í¥ÄÎßù' :\n                   (tradingSignal?.signal || 0) > -40 ? 'ÎπÑÏ§ëÏ∂ïÏÜå' :\n                   'Îß§ÎèÑ'}\n                </div>\n              </div>\n              \n              {/* Ïä§ÎßàÌä∏Î®∏Îãà Ï†êÏàò */}\n              <div className=\"text-center\">\n                <Tooltip>\n                  <TooltipTrigger>\n                    <h3 className=\"text-sm font-medium text-gray-600 mb-2 cursor-help\">\n                      Ïä§ÎßàÌä∏Î®∏Îãà Ï†êÏàò ‚ìò\n                    </h3>\n                  </TooltipTrigger>\n                  <TooltipContent className=\"max-w-xs\">\n                    <p className=\"font-semibold mb-1\">Ïä§ÎßàÌä∏Î®∏Îãà Ï†êÏàòÎûÄ?</p>\n                    <p className=\"text-sm\">Í∏∞Í¥Ä+Ïô∏Íµ≠Ïù∏Ïùò ÏàòÍ∏â Í∞ïÎèÑÎ•º Î∂ÑÏÑù</p>\n                    <p className=\"text-sm mt-1\">80 Ïù¥ÏÉÅ: Í∏∞Í¥Ä ÎåÄÎüâ Îß§Ïßë</p>\n                    <p className=\"text-sm\">65 Ïù¥ÏÉÅ: Ïä§ÎßàÌä∏Î®∏Îãà Îß§Ïàò Ïö∞ÏúÑ</p>\n                    <p className=\"text-sm\">35 Ïù¥Ìïò: Ïä§ÎßàÌä∏Î®∏Îãà Ïù¥ÌÉà</p>\n                    <p className=\"text-sm\">20 Ïù¥Ìïò: Í∏∞Í¥Ä ÎåÄÎüâ Îß§ÎèÑ</p>\n                  </TooltipContent>\n                </Tooltip>\n                <div className={`text-4xl font-bold mb-2 ${\n                  smartMoneyScore.score > 65 ? 'text-blue-600' :\n                  smartMoneyScore.score < 35 ? 'text-red-600' :\n                  'text-gray-600'\n                }`}>\n                  {smartMoneyScore.score?.toFixed(0) || 0}\n                </div>\n                <p className=\"text-xs text-gray-600 px-2\">\n                  {smartMoneyScore.interpretation}\n                </p>\n              </div>\n              \n              {/* Ï∂îÏ≤ú Ìè¨ÏßÄÏÖò */}\n              <div className=\"text-center\">\n                <Tooltip>\n                  <TooltipTrigger>\n                    <h3 className=\"text-sm font-medium text-gray-600 mb-2 cursor-help\">\n                      ÏµúÏ†Å Ìè¨ÏßÄÏÖò ÌÅ¨Í∏∞ ‚ìò\n                    </h3>\n                  </TooltipTrigger>\n                  <TooltipContent className=\"max-w-xs\">\n                    <p className=\"font-semibold mb-1\">Ìè¨ÏßÄÏÖò ÌÅ¨Í∏∞ÎûÄ?</p>\n                    <p className=\"text-sm\">Kelly Criterion Í∏∞Î∞ò Í≥ÑÏÇ∞</p>\n                    <p className=\"text-sm\">Î≥ÄÎèôÏÑ±Í≥º ÏäπÎ•†ÏùÑ Í≥†Î†§Ìïú ÏµúÏ†Å Ìà¨ÏûêÍ∏à</p>\n                  </TooltipContent>\n                </Tooltip>\n                <div className=\"text-2xl font-bold text-indigo-600 mb-1\">\n                  {formatKRW(optimalPosition.size)}\n                </div>\n                <p className=\"text-xs text-gray-600\">\n                  Î†àÎ≤ÑÎ¶¨ÏßÄ: {optimalPosition.leverage}x\n                </p>\n                <p className=\"text-xs text-gray-500\">\n                  {tradingSignal.recommendation?.targetAllocation || 'Ìè¨Ìä∏Ìè¥Î¶¨Ïò§Ïùò 5-10%'}\n                </p>\n              </div>\n            </div>\n            \n            {/* Ïã†Ìò∏ Ïã†Î¢∞ÎèÑ */}\n            <div className=\"mt-4 pt-4 border-t border-purple-200\">\n              <div className=\"flex items-center justify-between mb-1\">\n                <span className=\"text-sm font-medium\">Ïã†Ìò∏ Ïã†Î¢∞ÎèÑ</span>\n                <span className=\"text-sm font-bold\">\n                  {tradingSignal.confidence || tradingSignal.recommendation?.confidence || '0%'}\n                </span>\n              </div>\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className=\"bg-gradient-to-r from-purple-500 to-indigo-500 h-2 rounded-full transition-all duration-500\"\n                  style={{ width: `${tradingSignal.confidence || 0}%` }}\n                />\n              </div>\n            </div>\n            \n            {/* Í∏∞Í∞ÑÎ≥Ñ Ìï¥ÏÑù Í∞ÄÏù¥Îìú */}\n            <div className=\"mt-4 p-3 bg-blue-50 rounded-lg\">\n              <h4 className=\"font-medium text-sm mb-2 flex items-center gap-1\">\n                <Info className=\"w-4 h-4\" />\n                Í∏∞Í∞ÑÎ≥Ñ Ï†êÏàò Ìï¥ÏÑù Í∞ÄÏù¥Îìú\n              </h4>\n              <p className=\"text-xs text-gray-700 leading-relaxed\">\n                ‚Ä¢ <strong>30Ïùº/60Ïùº</strong>: Îã®Í∏∞ ÏàòÍ∏â ÌùêÎ¶Ñ Î∞òÏòÅ, Îã®Í∏∞ Ìà¨ÏûêÏóê Ï†ÅÌï©<br/>\n                ‚Ä¢ <strong>120Ïùº</strong>: Ï§ëÍ∏∞ Ï∂îÏÑ∏ Î∞òÏòÅ, Ïä§Ïúô Ìä∏Î†àÏù¥Îî©Ïóê Ï†ÅÌï©<br/>\n                ‚Ä¢ <strong>240Ïùº</strong>: Ïû•Í∏∞ Ìà¨Ïûê Í¥ÄÏ†ê, ÌÅ∞ Í∑∏Î¶º ÌååÏïÖÏóê Ïú†Ïö©<br/>\n                ‚Ä¢ Í∏∞Í∞ÑÏù¥ Í∏∏ÏàòÎ°ù ÎÖ∏Ïù¥Ï¶àÍ∞Ä Ï§ÑÍ≥† Ïã†Î¢∞ÎèÑÍ∞Ä ÎÜíÏïÑÏßëÎãàÎã§\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n        \n        {/* Signal Factors Breakdown */}\n        <Card className=\"border-2 border-indigo-200\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-indigo-700\">\n              <Activity className=\"w-5 h-5\" />\n              ÏÑ∏Î∂Ä Î∂ÑÏÑù Ìï≠Î™©\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n              {tradingSignal.factors?.map((factor, idx) => (\n                <div key={idx} className=\"p-3 bg-gray-50 rounded-lg\">\n                  <div className=\"flex items-center justify-between mb-1\">\n                    <span className=\"text-sm font-medium\">{factor.name}</span>\n                    <Tooltip>\n                      <TooltipTrigger>\n                        <Info className=\"w-3 h-3 text-gray-400\" />\n                      </TooltipTrigger>\n                      <TooltipContent>\n                        <p>Weight: {(factor.weight * 100).toFixed(0)}%</p>\n                        {factor.description && <p>{factor.description}</p>}\n                      </TooltipContent>\n                    </Tooltip>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"flex-1 bg-gray-200 rounded-full h-2\">\n                      <div \n                        className={`h-2 rounded-full transition-all duration-300 ${\n                          factor.value > 0 ? 'bg-green-500' : 'bg-red-500'\n                        }`}\n                        style={{ \n                          width: `${Math.min(100, Math.abs(factor.value))}%`,\n                          marginLeft: factor.value < 0 ? 'auto' : '0'\n                        }}\n                      />\n                    </div>\n                    <span className={`text-sm font-bold min-w-[3rem] text-right ${\n                      factor.value > 0 ? 'text-green-600' : \n                      factor.value < 0 ? 'text-red-600' : 'text-gray-600'\n                    }`}>\n                      {typeof factor.value === 'number' ? factor.value.toFixed(0) : factor.value}\n                    </span>\n                  </div>\n                  {factor.phase && (\n                    <p className=\"text-xs text-gray-500 mt-1\">{factor.phase}</p>\n                  )}\n                </div>\n              ))}\n            </div>\n            \n            {/* Backtest Performance */}\n            {signalBacktest && (\n              <div className=\"mt-4 p-4 bg-indigo-50 rounded-lg\">\n                <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n                  <Target className=\"w-4 h-4\" />\n                  Ïã†Ìò∏ ÏÑ±Í≥º (ÏµúÍ∑º 60Ïùº)\n                </h4>\n                <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                  <div>\n                    <span className=\"text-gray-600\">Ï†ïÌôïÎèÑ:</span>\n                    <p className=\"font-bold text-lg\">{signalBacktest.accuracy.toFixed(1)}%</p>\n                  </div>\n                  <div>\n                    <span className=\"text-gray-600\">Ï¥ù Ïã†Ìò∏:</span>\n                    <p className=\"font-bold text-lg\">{signalBacktest.totalSignals}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-gray-600\">ÏÑ±Í≥µ:</span>\n                    <p className=\"font-bold text-lg\">{signalBacktest.correctSignals}</p>\n                  </div>\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Î¶¨Ïä§ÌÅ¨ Í¥ÄÎ¶¨ ÎåÄÏãúÎ≥¥Îìú */}\n        <Card className=\"border-2 border-red-200\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-red-700\">\n              <Shield className=\"w-5 h-5\" />\n              Î¶¨Ïä§ÌÅ¨ Í¥ÄÎ¶¨\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              {/* VaR */}\n              <div className=\"p-4 bg-red-50 rounded-lg\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <h3 className=\"font-semibold\">ÏùºÏùº VaR</h3>\n                  <Tooltip>\n                    <TooltipTrigger>\n                      <Info className=\"w-4 h-4 text-gray-500\" />\n                    </TooltipTrigger>\n                    <TooltipContent className=\"max-w-xs\">\n                      <p className=\"font-semibold mb-1\">{RISK_INDICATORS.VaR.name}</p>\n                      <p>{RISK_INDICATORS.VaR.expert}</p>\n                    </TooltipContent>\n                  </Tooltip>\n                </div>\n                <p className=\"text-2xl font-bold text-red-600\">\n                  {calculations.dailyVaR?.toFixed(2)}%\n                </p>\n                <p className=\"text-sm text-gray-600\">\n                  Ìè¨ÏßÄÏÖò VaR: {formatKRW(calculations.positionVaR || 0)}\n                </p>\n              </div>\n\n              {/* Ïú†ÎèôÏÑ± */}\n              <div className=\"p-4 bg-blue-50 rounded-lg\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <h3 className=\"font-semibold\">Ïú†ÎèôÏÑ± Î∂ÑÏÑù</h3>\n                  <Tooltip>\n                    <TooltipTrigger>\n                      <Info className=\"w-4 h-4 text-gray-500\" />\n                    </TooltipTrigger>\n                    <TooltipContent className=\"max-w-xs\">\n                      <p className=\"font-semibold mb-1\">{RISK_INDICATORS.LIQUIDITY.name}</p>\n                      <p>{RISK_INDICATORS.LIQUIDITY.expert}</p>\n                    </TooltipContent>\n                  </Tooltip>\n                </div>\n                <p className=\"text-sm\">ÏùºÌèâÍ∑† Í±∞ÎûòÎåÄÍ∏à</p>\n                <p className=\"text-xl font-bold\">{formatKRW(calculations.avgVolume || 0)}</p>\n                <p className=\"text-sm text-blue-600 mt-1\">\n                  ÏïàÏ†Ñ Í±∞Îûò ÌïúÎèÑ: {formatKRW(calculations.safeTradeSize || 0)}\n                </p>\n              </div>\n\n              {/* ÏÉ§ÌîÑ ÎπÑÏú® */}\n              <div className=\"p-4 bg-green-50 rounded-lg\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <h3 className=\"font-semibold\">ÏÉ§ÌîÑ ÎπÑÏú®</h3>\n                  <Tooltip>\n                    <TooltipTrigger>\n                      <Info className=\"w-4 h-4 text-gray-500\" />\n                    </TooltipTrigger>\n                    <TooltipContent className=\"max-w-xs\">\n                      <p className=\"font-semibold mb-1\">{RISK_INDICATORS.SHARPE.name}</p>\n                      <p>{RISK_INDICATORS.SHARPE.expert}</p>\n                    </TooltipContent>\n                  </Tooltip>\n                </div>\n                <p className=\"text-2xl font-bold text-green-600\">\n                  {calculations.sharpeRatio?.toFixed(2) || \"N/A\"}\n                </p>\n                <p className=\"text-sm text-gray-600\">\n                  {calculations.sharpeRatio > 2 ? \"Ïö∞Ïàò\" : \n                   calculations.sharpeRatio > 1 ? \"ÏñëÌò∏\" : \n                   calculations.sharpeRatio > 0.5 ? \"Î≥¥ÌÜµ\" : \"ÎØ∏Ìù°\"}\n                </p>\n              </div>\n            </div>\n\n            {/* Î¶¨Ïä§ÌÅ¨ Í≤ΩÍ≥† */}\n            {calculations.dailyVaR > 3 && (\n              <div className=\"mt-4 p-4 bg-red-100 border border-red-300 rounded-lg flex items-center gap-2\">\n                <AlertTriangle className=\"w-5 h-5 text-red-600\" />\n                <p className=\"text-red-700 font-medium\">\n                  Í≤ΩÍ≥†: ÎÜíÏùÄ Î≥ÄÎèôÏÑ± Í∞êÏßÄ. Ìè¨ÏßÄÏÖò Ï∂ïÏÜåÎ•º Í≤ÄÌÜ†ÌïòÏÑ∏Ïöî.\n                </p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Ïä§ÎßàÌä∏Î®∏Îãà ÏàòÍ∏â Î∂ÑÏÑù */}\n        <Card className=\"border-2 border-blue-200\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-blue-700\">\n              <DollarSign className=\"w-5 h-5\" />\n              Ïä§ÎßàÌä∏Î®∏Îãà ÏàòÍ∏â Î∂ÑÏÑù\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {/* Ïä§ÎßàÌä∏Î®∏Îãà Ï†êÏàò Íµ¨ÏÑ± */}\n              <div className=\"p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg\">\n                <h3 className=\"font-semibold mb-3\">Ï†êÏàò Íµ¨ÏÑ± Ìï≠Î™©</h3>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                  {Object.entries(smartMoneyScore.breakdown || {}).map(([key, value]) => {\n                    const labels = {\n                      flowIntensity: 'ÏàòÍ∏â Í∞ïÎèÑ',\n                      persistence: 'ÏßÄÏÜçÏÑ±',\n                      retailDivergence: 'Í∞úÏù∏ Ïó≠Ìñâ',\n                      momentum: 'ÎàÑÏ†Å Î™®Î©òÌÖÄ',\n                      volumeSignal: 'Í±∞ÎûòÎüâ Ïã†Ìò∏',\n                      institutionalPattern: 'Í∏∞Í¥Ä Ìå®ÌÑ¥',\n                      marketRegime: 'ÏãúÏû• Î†àÏßê'\n                    };\n                    return (\n                      <div key={key} className=\"text-sm\">\n                        <span className=\"text-gray-600\">\n                          {labels[key] || key}:\n                        </span>\n                        <span className={`ml-2 font-bold ${\n                          typeof value === 'number' && value > 0 ? 'text-green-600' : \n                          typeof value === 'number' && value < 0 ? 'text-red-600' : 'text-gray-600'\n                        }`}>\n                          {typeof value === 'number' ? value.toFixed(1) : value}\n                        </span>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n\n              {/* Ï£ºÏ≤¥Î≥Ñ ÏÉÅÏÑ∏ */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n                    Ïä§ÎßàÌä∏Î®∏Îãà (Í∏∞Í¥Ä+Ïô∏Ïù∏)\n                    <Tooltip>\n                      <TooltipTrigger>\n                        <Info className=\"w-4 h-4 text-gray-500\" />\n                      </TooltipTrigger>\n                      <TooltipContent className=\"max-w-xs\">\n                        <p>Ï†ïÎ≥¥Î†•Í≥º ÏûêÍ∏àÎ†•ÏùÑ Í∞ñÏ∂ò Ï†ÑÎ¨∏ Ìà¨ÏûêÏûêÎì§</p>\n                        <p className=\"mt-1 text-xs\">ÌååÎûÄÏÉâ: Îß§ÎèÑ / Îπ®Í∞ÑÏÉâ: Îß§Ïàò</p>\n                      </TooltipContent>\n                    </Tooltip>\n                  </h4>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between\">\n                      <span>Ïô∏Íµ≠Ïù∏</span>\n                      <span className={`font-bold ${(latest._flows?.Ïô∏Íµ≠Ïù∏Ìï©Í≥Ñ || 0) > 0 ? 'text-red-600' : 'text-blue-600'}`}>\n                        {formatKRW(latest._flows?.Ïô∏Íµ≠Ïù∏Ìï©Í≥Ñ || 0)}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Í∏∞Í¥Ä</span>\n                      <span className={`font-bold ${(latest._flows?.Í∏∞Í¥ÄÌï©Í≥Ñ || 0) > 0 ? 'text-red-600' : 'text-blue-600'}`}>\n                        {formatKRW(latest._flows?.Í∏∞Í¥ÄÌï©Í≥Ñ || 0)}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n                    Í∞úÏù∏ Ìà¨ÏûêÏûê\n                    <Tooltip>\n                      <TooltipTrigger>\n                        <Info className=\"w-4 h-4 text-gray-500\" />\n                      </TooltipTrigger>\n                      <TooltipContent className=\"max-w-xs\">\n                        <p>Í∞úÏù∏ Ìà¨ÏûêÏûêÎì§Ïùò Îß§Îß§ ÌòÑÌô©</p>\n                        <p className=\"mt-1 text-xs\">Ïä§ÎßàÌä∏Î®∏ÎãàÏôÄ Î∞òÎåÄÎ°ú ÏõÄÏßÅÏù¥Î©¥ Í∏çÏ†ï Ïã†Ìò∏</p>\n                      </TooltipContent>\n                    </Tooltip>\n                  </h4>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between\">\n                      <span>ÏàúÎß§Ïàò</span>\n                      <span className={`font-bold ${(latest._flows?.Í∞úÏù∏ || 0) > 0 ? 'text-red-600' : 'text-blue-600'}`}>\n                        {formatKRW(latest._flows?.Í∞úÏù∏ || 0)}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Ìè¨ÏßÄÏÖò Í¥ÄÎ¶¨ */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <TrendingUp className=\"w-5 h-5\" />\n              Î¶¨Ïä§ÌÅ¨ Ï°∞Ï†ï Ìè¨ÏßÄÏÖò Í¥ÄÎ¶¨\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg\">\n                <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n                  ÏµúÏ†Å Ìè¨ÏßÄÏÖò ÌÅ¨Í∏∞\n                  <Tooltip>\n                    <TooltipTrigger>\n                      <Info className=\"w-4 h-4 text-gray-400\" />\n                    </TooltipTrigger>\n                    <TooltipContent className=\"max-w-xs\">\n                      <p>Kelly CriterionÏùÑ Í∏∞Î∞òÏúºÎ°ú Í≥ÑÏÇ∞</p>\n                      <p>ÏïàÏ†ÑÏùÑ ÏúÑÌï¥ 1/4 Kelly Ï†ÅÏö©</p>\n                    </TooltipContent>\n                  </Tooltip>\n                </h4>\n                <p className=\"text-2xl font-bold text-green-700 mb-2\">\n                  {formatKRW(optimalPosition.size)}\n                </p>\n                <div className=\"space-y-1 text-xs text-gray-600\">\n                  {optimalPosition.reasoning?.map((reason, idx) => {\n                    const koreanLabels = {\n                      'Kelly Fraction': 'Kelly ÎπÑÏú®',\n                      'Volatility Adjustment': 'Î≥ÄÎèôÏÑ± Ï°∞Ï†ï',\n                      'Win Rate': 'ÏäπÎ•†',\n                      'Risk-Adjusted Size': 'Î¶¨Ïä§ÌÅ¨ Ï°∞Ï†ï ÌÅ¨Í∏∞',\n                      'Insufficient loss data': 'ÏÜêÏã§ Îç∞Ïù¥ÌÑ∞ Î∂ÄÏ°±',\n                      'ÏµúÏÜå 20Ïùº Îç∞Ïù¥ÌÑ∞ ÌïÑÏöî': 'ÏµúÏÜå 20Ïùº Îç∞Ïù¥ÌÑ∞ ÌïÑÏöî'\n                    };\n                    let translatedReason = reason;\n                    Object.entries(koreanLabels).forEach(([eng, kor]) => {\n                      translatedReason = translatedReason.replace(eng, kor);\n                    });\n                    return <p key={idx}>‚Ä¢ {translatedReason}</p>;\n                  })}\n                </div>\n              </div>\n              \n              <div className=\"p-4 bg-gradient-to-br from-red-50 to-orange-50 rounded-lg\">\n                <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n                  ÎèôÏ†Å Î¶¨Ïä§ÌÅ¨ Í¥ÄÎ¶¨\n                  <Tooltip>\n                    <TooltipTrigger>\n                      <Info className=\"w-4 h-4 text-gray-400\" />\n                    </TooltipTrigger>\n                    <TooltipContent className=\"max-w-xs\">\n                      <p>ÏãúÏû• ÏÉÅÌô©Í≥º Î≥ÄÎèôÏÑ±Ïóê Îî∞Îùº</p>\n                      <p>Î¶¨Ïä§ÌÅ¨ ÌïúÎèÑÍ∞Ä ÏûêÎèô Ï°∞Ï†ïÎê©ÎãàÎã§</p>\n                    </TooltipContent>\n                  </Tooltip>\n                </h4>\n                <div className=\"space-y-2\">\n                  <div>\n                    <span className=\"text-sm text-gray-600\">ÏÜêÏ†àÏÑ†:</span>\n                    <p className=\"font-bold text-red-600\">\n                      {tradingSignal.recommendation?.stopLoss || 'ÏßÑÏûÖÍ∞Ä -5%'}\n                    </p>\n                  </div>\n                  <div>\n                    <span className=\"text-sm text-gray-600\">Î™©Ìëú ÎπÑÏ§ë:</span>\n                    <p className=\"font-bold text-orange-600\">\n                      {tradingSignal.recommendation?.targetAllocation || '5-10%'}\n                    </p>\n                  </div>\n                  <div>\n                    <span className=\"text-sm text-gray-600\">Î¶¨Ïä§ÌÅ¨ Î∞∞Ïàò:</span>\n                    <p className=\"font-bold\">\n                      {tradingSignal.riskMultiplier?.toFixed(2) || '1.00'}x\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            {/* Risk Warnings */}\n            {marketRegime === 'HIGH_VOLATILITY' && (\n              <div className=\"mt-4 p-3 bg-orange-100 border border-orange-300 rounded-lg flex items-center gap-2\">\n                <AlertCircle className=\"w-5 h-5 text-orange-600 flex-shrink-0\" />\n                <p className=\"text-sm text-orange-700\">\n                  Í≥†Î≥ÄÎèôÏÑ± Í∞êÏßÄ. Ìè¨ÏßÄÏÖò ÌÅ¨Í∏∞Í∞Ä ÏûêÎèôÏúºÎ°ú {((1 - (tradingSignal.riskMultiplier || 0.7)) * 100).toFixed(0)}% Í∞êÏÜåÎêòÏóàÏäµÎãàÎã§.\n                </p>\n              </div>\n            )}\n            \n            {calculations.dailyVaR > 4 && (\n              <div className=\"mt-4 p-3 bg-red-100 border border-red-300 rounded-lg flex items-center gap-2\">\n                <AlertTriangle className=\"w-5 h-5 text-red-600 flex-shrink-0\" />\n                <p className=\"text-sm text-red-700\">\n                  Í∑πÎã®Ï†Å Î¶¨Ïä§ÌÅ¨ ÏàòÏ§Ä. ÎÖ∏Ï∂úÎèÑÎ•º Ï§ÑÏù¥Í±∞ÎÇò Ìó§ÏßÄÎ•º Í≥†Î†§ÌïòÏÑ∏Ïöî.\n                </p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </TooltipProvider>\n  );\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,OAAO,KAAQ,OAAO,CACtC,OAASC,IAAI,CAAEC,WAAW,CAAEC,UAAU,CAAEC,SAAS,KAAQ,WAAW,CACpE,OAASC,OAAO,CAAEC,cAAc,CAAEC,eAAe,CAAEC,cAAc,KAAQ,cAAc,CACvF,OAASC,aAAa,CAAEC,UAAU,CAAEC,UAAU,CAAEC,MAAM,CAAEC,IAAI,CAAEC,SAAS,CAAEC,QAAQ,CAAEC,MAAM,CAAEC,WAAW,KAAQ,cAAc,CAC5H,OAASC,eAAe,KAAQ,oCAAoC,CACpE,OACEC,qCAAqC,CACrCC,mCAAmC,CACnCC,kBAAkB,CAClBC,4BAA4B,CAC5BC,yBAAyB,KACpB,iCAAiC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzC,cAAe,SAAS,CAAAC,sBAAsBA,CAAAC,IAAA,CAAsB,KAAAC,qBAAA,CAAAC,qBAAA,CAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,qBAAA,CAAAC,qBAAA,CAAAC,qBAAA,CAAAC,cAAA,CAAAC,eAAA,CAAAC,eAAA,CAAAC,eAAA,CAAAC,eAAA,CAAAC,eAAA,CAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,qBAAA,IAArB,CAAEC,IAAI,CAAEC,SAAU,CAAC,CAAApB,IAAA,CAChE;AACA,KAAM,CAAAqB,SAAS,CAAG,SAAS,CAAE;AAC7B,KAAM,CAAAC,WAAW,CAAGH,IAAI,CAACI,MAAM,CAAG,CAAC,CACnC,KAAM,CAAAC,MAAM,CAAGrD,OAAO,CAAC,IAAMgD,IAAI,CAACG,WAAW,CAAC,EAAI,CAAC,CAAC,CAAE,CAACH,IAAI,CAAEG,WAAW,CAAC,CAAC,CAE1E;AACA,KAAM,CAAAG,eAAe,CAAGtD,OAAO,CAAC,IAAM,CACpC,GAAI,CAACgD,IAAI,EAAIA,IAAI,CAACI,MAAM,CAAG,EAAE,CAAE,MAAO,CAAEG,KAAK,CAAE,EAAE,CAAEC,SAAS,CAAE,CAAC,CAAC,CAAEC,cAAc,CAAE,QAAS,CAAC,CAC5F,MAAO,CAAAtC,qCAAqC,CAAC6B,IAAI,CAAEG,WAAW,CAAC,CACjE,CAAC,CAAE,CAACH,IAAI,CAAEG,WAAW,CAAC,CAAC,CAEvB,KAAM,CAAAO,aAAa,CAAG1D,OAAO,CAAC,IAAM,CAClC,GAAI,CAACgD,IAAI,EAAIA,IAAI,CAACI,MAAM,CAAG,EAAE,CAAE,MAAO,CACpCO,MAAM,CAAE,CAAC,CACTC,OAAO,CAAE,EAAE,CACXC,YAAY,CAAE,CAAC,CAAC,CAChBC,cAAc,CAAE,CAAEC,MAAM,CAAE,MAAM,CAAEC,WAAW,CAAE,UAAW,CAAC,CAC3DC,UAAU,CAAE,CACd,CAAC,CACD,MAAO,CAAA7C,mCAAmC,CAAC4B,IAAI,CAAEG,WAAW,CAAC,EAAI,CAC/DQ,MAAM,CAAE,CAAC,CACTC,OAAO,CAAE,EAAE,CACXC,YAAY,CAAE,CAAC,CAAC,CAChBC,cAAc,CAAE,CAAEC,MAAM,CAAE,MAAM,CAAEC,WAAW,CAAE,MAAO,CAAC,CACvDC,UAAU,CAAE,CACd,CAAC,CACH,CAAC,CAAE,CAACjB,IAAI,CAAEG,WAAW,CAAC,CAAC,CAEvB,KAAM,CAAAe,YAAY,CAAGlE,OAAO,CAAC,IAAM,CACjC,GAAI,CAACgD,IAAI,EAAIA,IAAI,CAACI,MAAM,CAAG,EAAE,CAAE,MAAO,SAAS,CAC/C,MAAO,CAAA/B,kBAAkB,CAAC2B,IAAI,CAAEG,WAAW,CAAC,CAC9C,CAAC,CAAE,CAACH,IAAI,CAAEG,WAAW,CAAC,CAAC,CAEvB,KAAM,CAAAgB,eAAe,CAAGnE,OAAO,CAAC,IAAM,CACpC,GAAI,CAACgD,IAAI,EAAIA,IAAI,CAACI,MAAM,CAAG,EAAE,CAAE,MAAO,CAAEgB,IAAI,CAAE,CAAC,CAAEC,QAAQ,CAAE,CAAC,CAAEC,SAAS,CAAE,CAAC,QAAQ,CAAE,CAAC,CACrF,MAAO,CAAAhD,4BAA4B,CAAC0B,IAAI,CAAEG,WAAW,CAAED,SAAS,CAAC,CACnE,CAAC,CAAE,CAACF,IAAI,CAAEG,WAAW,CAAC,CAAC,CAEvB,KAAM,CAAAoB,cAAc,CAAGvE,OAAO,CAAC,IAAM,CACnC,GAAIgD,IAAI,CAACI,MAAM,CAAG,GAAG,CAAE,MAAO,KAAI,CAClC,MAAO,CAAA7B,yBAAyB,CAACyB,IAAI,CAAC,CACxC,CAAC,CAAE,CAACA,IAAI,CAAC,CAAC,CAEV;AACA,KAAM,CAAAwB,YAAY,CAAGxE,OAAO,CAAC,IAAM,CACjC,GAAI,CAACgD,IAAI,EAAIA,IAAI,CAACI,MAAM,CAAG,EAAE,CAAE,MAAO,CAAC,CAAC,CAExC;AACA,KAAM,CAAAqB,OAAO,CAAG,EAAE,CAClB,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGC,IAAI,CAACC,GAAG,CAAC5B,IAAI,CAACI,MAAM,CAAE,EAAE,CAAC,CAAEsB,CAAC,EAAE,CAAE,CAClD,KAAM,CAAAG,GAAG,CAAG,CAAC7B,IAAI,CAAC0B,CAAC,CAAC,CAACI,KAAK,CAAG9B,IAAI,CAAC0B,CAAC,CAAC,CAAC,CAAC,CAACI,KAAK,EAAI9B,IAAI,CAAC0B,CAAC,CAAC,CAAC,CAAC,CAACI,KAAK,CAC/DL,OAAO,CAACM,IAAI,CAACF,GAAG,CAAC,CACnB,CAEA,KAAM,CAAAG,SAAS,CAAGP,OAAO,CAACQ,MAAM,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKD,CAAC,CAAGC,CAAC,CAAE,CAAC,CAAC,CAAGV,OAAO,CAACrB,MAAM,CACrE,KAAM,CAAAgC,QAAQ,CAAGX,OAAO,CAACQ,MAAM,CAAC,CAACI,GAAG,CAAER,GAAG,GAAKQ,GAAG,CAAGV,IAAI,CAACW,GAAG,CAACT,GAAG,CAAGG,SAAS,CAAE,CAAC,CAAC,CAAE,CAAC,CAAC,CAAGP,OAAO,CAACrB,MAAM,CACrG,KAAM,CAAAmC,UAAU,CAAGZ,IAAI,CAACa,IAAI,CAACJ,QAAQ,CAAC,CAAGT,IAAI,CAACa,IAAI,CAAC,GAAG,CAAC,CAAE;AAEzD;AACA,KAAM,CAAAC,QAAQ,CAAGF,UAAU,CAAGZ,IAAI,CAACa,IAAI,CAAC,GAAG,CAAC,CAAG,IAAI,CAEnD;AACA,KAAM,CAAAE,SAAS,CAAG1C,IAAI,CAAC2C,KAAK,CAAC,CAAC,EAAE,CAAC,CAACV,MAAM,CAAC,CAACI,GAAG,CAAEO,CAAC,GAAKP,GAAG,CAAIO,CAAC,CAACd,KAAK,CAAGc,CAAC,CAACC,MAAO,CAAE,CAAC,CAAC,CAAG,EAAE,CAExF;AACA,KAAM,CAAAC,aAAa,CAAGJ,SAAS,CAAG,IAAI,CAEtC;AACA,KAAM,CAAA7B,YAAY,CAAGX,SAAS,CAAG,KAAK,CACtC,KAAM,CAAA6C,WAAW,CAAGlC,YAAY,CAAG4B,QAAQ,CAE3C,MAAO,CACLF,UAAU,CAAEA,UAAU,CAAG,GAAG,CAC5BE,QAAQ,CAAEA,QAAQ,CAAG,GAAG,CACxBM,WAAW,CACXL,SAAS,CACTI,aAAa,CACbjC,YAAY,CACZmC,WAAW,CAAEhB,SAAS,CAAG,CAAC,CAAIA,SAAS,CAAG,GAAG,CAAIO,UAAU,CAAG,CAChE,CAAC,CACH,CAAC,CAAE,CAACvC,IAAI,CAAC,CAAC,CAEV;AAEA,KAAM,CAAAiD,SAAS,CAAIC,GAAG,EAAK,CACzB,KAAM,CAAAC,MAAM,CAAGxB,IAAI,CAACyB,GAAG,CAACF,GAAG,CAAC,CAC5B,GAAIC,MAAM,EAAI,aAAa,CAAE,SAAAE,MAAA,CAAU,CAACH,GAAG,CAAG,aAAa,EAAEI,OAAO,CAAC,CAAC,CAAC,iBACvE,GAAIH,MAAM,EAAI,SAAS,CAAE,SAAAE,MAAA,CAAU,CAACH,GAAG,CAAG,SAAS,EAAEI,OAAO,CAAC,CAAC,CAAC,iBAC/D,GAAIH,MAAM,EAAI,KAAK,CAAE,SAAAE,MAAA,CAAU,CAACH,GAAG,CAAG,KAAK,EAAEI,OAAO,CAAC,CAAC,CAAC,iBACvD,SAAAD,MAAA,CAAUH,GAAG,CAACK,cAAc,CAAC,CAAC,WAChC,CAAC,CAED,mBACE9E,IAAA,CAAClB,eAAe,EAAAiG,QAAA,cACd7E,KAAA,QAAK8E,SAAS,CAAC,WAAW,CAAAD,QAAA,eAExB7E,KAAA,QAAK8E,SAAS,CAAC,wCAAwC,CAAAD,QAAA,eACrD7E,KAAA,OAAI8E,SAAS,CAAC,4CAA4C,CAAAD,QAAA,eACxD/E,IAAA,CAACX,SAAS,EAAC2F,SAAS,CAAC,SAAS,CAAE,CAAC,wDAEnC,EAAI,CAAC,cACLhF,IAAA,QAAKgF,SAAS,CAAC,yBAAyB,CAAAD,QAAA,cACtC7E,KAAA,SAAM8E,SAAS,+CAAAJ,MAAA,CACbnC,YAAY,GAAK,eAAe,CAAG,6BAA6B,CAChEA,YAAY,GAAK,eAAe,CAAG,yBAAyB,CAC5DA,YAAY,GAAK,iBAAiB,CAAG,+BAA+B,CACpEA,YAAY,GAAK,aAAa,CAAG,2BAA2B,CAC5DA,YAAY,GAAK,oBAAoB,CAAG,+BAA+B,CACvE,2BAA2B,CAC1B,CAAAsC,QAAA,EAAC,6BACK,CAACtC,YAAY,GAAK,eAAe,CAAG,OAAO,CAC1CA,YAAY,GAAK,eAAe,CAAG,OAAO,CAC1CA,YAAY,GAAK,iBAAiB,CAAG,MAAM,CAC3CA,YAAY,GAAK,aAAa,CAAG,OAAO,CACxCA,YAAY,GAAK,oBAAoB,CAAG,OAAO,CAC/CA,YAAY,GAAK,eAAe,CAAG,KAAK,CAAG,MAAM,EACrD,CAAC,CACJ,CAAC,EACH,CAAC,cAGNvC,KAAA,CAAC1B,IAAI,EAACwG,SAAS,CAAC,yEAAyE,CAAAD,QAAA,eACvF/E,IAAA,CAACtB,UAAU,EAAAqG,QAAA,cACT/E,IAAA,CAACrB,SAAS,EAACqG,SAAS,CAAC,mBAAmB,CAAAD,QAAA,CAAC,2DAAY,CAAW,CAAC,CACvD,CAAC,cACb7E,KAAA,CAACzB,WAAW,EAACuG,SAAS,CAAC,KAAK,CAAAD,QAAA,eAE1B7E,KAAA,QAAK8E,SAAS,CAAC,uDAAuD,CAAAD,QAAA,eACpE7E,KAAA,OAAI8E,SAAS,CAAC,oCAAoC,CAAAD,QAAA,EAAC,yCAEjD,cAAA/E,IAAA,SAAMgF,SAAS,SAAAJ,MAAA,CACb,CAAC,CAAA3C,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,EAAE,CAAG,gBAAgB,CACpD,CAAC,CAAAD,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,EAAE,CAAG,gBAAgB,CACpD,CAAC,CAAAD,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,CAAC,EAAE,CAAG,iBAAiB,CACtD,CAAC,CAAAD,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,CAAC,EAAE,CAAG,iBAAiB,CACtD,cAAc,CACb,CAAA6C,QAAA,CACA,CAAC,CAAA9C,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,EAAE,CAAG,OAAO,CAC3C,CAAC,CAAAD,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,EAAE,CAAG,UAAU,CAC9C,CAAC,CAAAD,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,CAAC,EAAE,CAAG,OAAO,CAC5C,CAAC,CAAAD,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,CAAC,EAAE,CAAG,UAAU,CAC/C,OAAO,CACJ,CAAC,EACL,CAAC,cACLlC,IAAA,MAAGgF,SAAS,CAAC,mCAAmC,CAAAD,QAAA,CAC7C,EAAA1E,qBAAA,CAAA4B,aAAa,CAACI,cAAc,UAAAhC,qBAAA,iBAA5BA,qBAAA,CAA8BkC,WAAW,GAAI,aAAa,CAC1D,CAAC,EACD,CAAC,cAENrC,KAAA,QAAK8E,SAAS,CAAC,uCAAuC,CAAAD,QAAA,eAEpD7E,KAAA,QAAK8E,SAAS,CAAC,aAAa,CAAAD,QAAA,eAC1B7E,KAAA,CAACtB,OAAO,EAAAmG,QAAA,eACN/E,IAAA,CAACjB,cAAc,EAAAgG,QAAA,cACb/E,IAAA,OAAIgF,SAAS,CAAC,oDAAoD,CAAAD,QAAA,CAAC,+CAEnE,CAAI,CAAC,CACS,CAAC,cACjB7E,KAAA,CAACrB,cAAc,EAACmG,SAAS,CAAC,UAAU,CAAAD,QAAA,eAClC/E,IAAA,MAAGgF,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAAC,+CAAU,CAAG,CAAC,cAChD/E,IAAA,MAAGgF,SAAS,CAAC,SAAS,CAAAD,QAAA,CAAC,mEAAyB,CAAG,CAAC,cACpD/E,IAAA,MAAGgF,SAAS,CAAC,cAAc,CAAAD,QAAA,CAAC,6CAAa,CAAG,CAAC,cAC7C/E,IAAA,MAAGgF,SAAS,CAAC,SAAS,CAAAD,QAAA,CAAC,6CAAa,CAAG,CAAC,cACxC/E,IAAA,MAAGgF,SAAS,CAAC,SAAS,CAAAD,QAAA,CAAC,sCAAgB,CAAG,CAAC,EAC7B,CAAC,EACV,CAAC,cACV/E,IAAA,QAAKgF,SAAS,4BAAAJ,MAAA,CACZ,CAAC,CAAA3C,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,EAAE,CAAG,gBAAgB,CACpD,CAAC,CAAAD,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,CAAC,EAAE,CAAG,cAAc,CACnD,iBAAiB,CAChB,CAAA6C,QAAA,CACA,EAAAzE,qBAAA,CAAC2B,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,UAAA5B,qBAAA,UAAAA,qBAAA,CAAI,CAAC,EAAEuE,OAAO,CAAC,CAAC,CAAC,CACrC,CAAC,cACN7E,IAAA,QAAKgF,SAAS,4DAAAJ,MAAA,CACZ,CAAC,CAAA3C,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,EAAE,CAAG,yBAAyB,CAC7D,CAAC,CAAAD,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,EAAE,CAAG,yBAAyB,CAC7D,CAAC,CAAAD,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,CAAC,EAAE,CAAG,0BAA0B,CAC/D,CAAC,CAAAD,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,CAAC,EAAE,CAAG,0BAA0B,CAC/D,uBAAuB,CACtB,CAAA6C,QAAA,CACA,CAAC,CAAA9C,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,EAAE,CAAG,IAAI,CACxC,CAAC,CAAAD,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,EAAE,CAAG,MAAM,CAC1C,CAAC,CAAAD,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,CAAC,EAAE,CAAG,IAAI,CACzC,CAAC,CAAAD,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEC,MAAM,GAAI,CAAC,EAAI,CAAC,EAAE,CAAG,MAAM,CAC3C,IAAI,CACF,CAAC,EACH,CAAC,cAGNhC,KAAA,QAAK8E,SAAS,CAAC,aAAa,CAAAD,QAAA,eAC1B7E,KAAA,CAACtB,OAAO,EAAAmG,QAAA,eACN/E,IAAA,CAACjB,cAAc,EAAAgG,QAAA,cACb/E,IAAA,OAAIgF,SAAS,CAAC,oDAAoD,CAAAD,QAAA,CAAC,oDAEnE,CAAI,CAAC,CACS,CAAC,cACjB7E,KAAA,CAACrB,cAAc,EAACmG,SAAS,CAAC,UAAU,CAAAD,QAAA,eAClC/E,IAAA,MAAGgF,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAAC,oDAAU,CAAG,CAAC,cAChD/E,IAAA,MAAGgF,SAAS,CAAC,SAAS,CAAAD,QAAA,CAAC,oFAAiB,CAAG,CAAC,cAC5C/E,IAAA,MAAGgF,SAAS,CAAC,cAAc,CAAAD,QAAA,CAAC,yDAAe,CAAG,CAAC,cAC/C/E,IAAA,MAAGgF,SAAS,CAAC,SAAS,CAAAD,QAAA,CAAC,2EAAkB,CAAG,CAAC,cAC7C/E,IAAA,MAAGgF,SAAS,CAAC,SAAS,CAAAD,QAAA,CAAC,8DAAe,CAAG,CAAC,cAC1C/E,IAAA,MAAGgF,SAAS,CAAC,SAAS,CAAAD,QAAA,CAAC,yDAAe,CAAG,CAAC,EAC5B,CAAC,EACV,CAAC,cACV/E,IAAA,QAAKgF,SAAS,4BAAAJ,MAAA,CACZ/C,eAAe,CAACC,KAAK,CAAG,EAAE,CAAG,eAAe,CAC5CD,eAAe,CAACC,KAAK,CAAG,EAAE,CAAG,cAAc,CAC3C,eAAe,CACd,CAAAiD,QAAA,CACA,EAAAxE,qBAAA,CAAAsB,eAAe,CAACC,KAAK,UAAAvB,qBAAA,iBAArBA,qBAAA,CAAuBsE,OAAO,CAAC,CAAC,CAAC,GAAI,CAAC,CACpC,CAAC,cACN7E,IAAA,MAAGgF,SAAS,CAAC,4BAA4B,CAAAD,QAAA,CACtClD,eAAe,CAACG,cAAc,CAC9B,CAAC,EACD,CAAC,cAGN9B,KAAA,QAAK8E,SAAS,CAAC,aAAa,CAAAD,QAAA,eAC1B7E,KAAA,CAACtB,OAAO,EAAAmG,QAAA,eACN/E,IAAA,CAACjB,cAAc,EAAAgG,QAAA,cACb/E,IAAA,OAAIgF,SAAS,CAAC,oDAAoD,CAAAD,QAAA,CAAC,qDAEnE,CAAI,CAAC,CACS,CAAC,cACjB7E,KAAA,CAACrB,cAAc,EAACmG,SAAS,CAAC,UAAU,CAAAD,QAAA,eAClC/E,IAAA,MAAGgF,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAAC,wCAAQ,CAAG,CAAC,cAC9C/E,IAAA,MAAGgF,SAAS,CAAC,SAAS,CAAAD,QAAA,CAAC,2CAAqB,CAAG,CAAC,cAChD/E,IAAA,MAAGgF,SAAS,CAAC,SAAS,CAAAD,QAAA,CAAC,gGAAmB,CAAG,CAAC,EAChC,CAAC,EACV,CAAC,cACV/E,IAAA,QAAKgF,SAAS,CAAC,yCAAyC,CAAAD,QAAA,CACrDP,SAAS,CAAC9B,eAAe,CAACC,IAAI,CAAC,CAC7B,CAAC,cACNzC,KAAA,MAAG8E,SAAS,CAAC,uBAAuB,CAAAD,QAAA,EAAC,4BAC7B,CAACrC,eAAe,CAACE,QAAQ,CAAC,GAClC,EAAG,CAAC,cACJ5C,IAAA,MAAGgF,SAAS,CAAC,uBAAuB,CAAAD,QAAA,CACjC,EAAAvE,sBAAA,CAAAyB,aAAa,CAACI,cAAc,UAAA7B,sBAAA,iBAA5BA,sBAAA,CAA8ByE,gBAAgB,GAAI,cAAc,CAChE,CAAC,EACD,CAAC,EACH,CAAC,cAGN/E,KAAA,QAAK8E,SAAS,CAAC,sCAAsC,CAAAD,QAAA,eACnD7E,KAAA,QAAK8E,SAAS,CAAC,wCAAwC,CAAAD,QAAA,eACrD/E,IAAA,SAAMgF,SAAS,CAAC,qBAAqB,CAAAD,QAAA,CAAC,iCAAM,CAAM,CAAC,cACnD/E,IAAA,SAAMgF,SAAS,CAAC,mBAAmB,CAAAD,QAAA,CAChC9C,aAAa,CAACO,UAAU,IAAA/B,sBAAA,CAAIwB,aAAa,CAACI,cAAc,UAAA5B,sBAAA,iBAA5BA,sBAAA,CAA8B+B,UAAU,GAAI,IAAI,CACzE,CAAC,EACJ,CAAC,cACNxC,IAAA,QAAKgF,SAAS,CAAC,qCAAqC,CAAAD,QAAA,cAClD/E,IAAA,QACEgF,SAAS,CAAC,6FAA6F,CACvGE,KAAK,CAAE,CAAEC,KAAK,IAAAP,MAAA,CAAK3C,aAAa,CAACO,UAAU,EAAI,CAAC,KAAI,CAAE,CACvD,CAAC,CACC,CAAC,EACH,CAAC,cAGNtC,KAAA,QAAK8E,SAAS,CAAC,gCAAgC,CAAAD,QAAA,eAC7C7E,KAAA,OAAI8E,SAAS,CAAC,kDAAkD,CAAAD,QAAA,eAC9D/E,IAAA,CAACZ,IAAI,EAAC4F,SAAS,CAAC,SAAS,CAAE,CAAC,kEAE9B,EAAI,CAAC,cACL9E,KAAA,MAAG8E,SAAS,CAAC,uCAAuC,CAAAD,QAAA,EAAC,SACjD,cAAA/E,IAAA,WAAA+E,QAAA,CAAQ,mBAAO,CAAQ,CAAC,sGAAwB,cAAA/E,IAAA,QAAI,CAAC,UACrD,cAAAA,IAAA,WAAA+E,QAAA,CAAQ,WAAI,CAAQ,CAAC,qGAAuB,cAAA/E,IAAA,QAAI,CAAC,UACjD,cAAAA,IAAA,WAAA+E,QAAA,CAAQ,WAAI,CAAQ,CAAC,gGAAuB,cAAA/E,IAAA,QAAI,CAAC,6IAErD,EAAG,CAAC,EACD,CAAC,EACK,CAAC,EACV,CAAC,cAGPE,KAAA,CAAC1B,IAAI,EAACwG,SAAS,CAAC,4BAA4B,CAAAD,QAAA,eAC1C/E,IAAA,CAACtB,UAAU,EAAAqG,QAAA,cACT7E,KAAA,CAACvB,SAAS,EAACqG,SAAS,CAAC,yCAAyC,CAAAD,QAAA,eAC5D/E,IAAA,CAACV,QAAQ,EAAC0F,SAAS,CAAC,SAAS,CAAE,CAAC,yCAElC,EAAW,CAAC,CACF,CAAC,cACb9E,KAAA,CAACzB,WAAW,EAAAsG,QAAA,eACV/E,IAAA,QAAKgF,SAAS,CAAC,uCAAuC,CAAAD,QAAA,EAAArE,qBAAA,CACnDuB,aAAa,CAACE,OAAO,UAAAzB,qBAAA,iBAArBA,qBAAA,CAAuB0E,GAAG,CAAC,CAACC,MAAM,CAAEC,GAAG,gBACtCpF,KAAA,QAAe8E,SAAS,CAAC,2BAA2B,CAAAD,QAAA,eAClD7E,KAAA,QAAK8E,SAAS,CAAC,wCAAwC,CAAAD,QAAA,eACrD/E,IAAA,SAAMgF,SAAS,CAAC,qBAAqB,CAAAD,QAAA,CAAEM,MAAM,CAACE,IAAI,CAAO,CAAC,cAC1DrF,KAAA,CAACtB,OAAO,EAAAmG,QAAA,eACN/E,IAAA,CAACjB,cAAc,EAAAgG,QAAA,cACb/E,IAAA,CAACZ,IAAI,EAAC4F,SAAS,CAAC,uBAAuB,CAAE,CAAC,CAC5B,CAAC,cACjB9E,KAAA,CAACrB,cAAc,EAAAkG,QAAA,eACb7E,KAAA,MAAA6E,QAAA,EAAG,UAAQ,CAAC,CAACM,MAAM,CAACG,MAAM,CAAG,GAAG,EAAEX,OAAO,CAAC,CAAC,CAAC,CAAC,GAAC,EAAG,CAAC,CACjDQ,MAAM,CAAC9C,WAAW,eAAIvC,IAAA,MAAA+E,QAAA,CAAIM,MAAM,CAAC9C,WAAW,CAAI,CAAC,EACpC,CAAC,EACV,CAAC,EACP,CAAC,cACNrC,KAAA,QAAK8E,SAAS,CAAC,yBAAyB,CAAAD,QAAA,eACtC/E,IAAA,QAAKgF,SAAS,CAAC,qCAAqC,CAAAD,QAAA,cAClD/E,IAAA,QACEgF,SAAS,iDAAAJ,MAAA,CACPS,MAAM,CAACI,KAAK,CAAG,CAAC,CAAG,cAAc,CAAG,YAAY,CAC/C,CACHP,KAAK,CAAE,CACLC,KAAK,IAAAP,MAAA,CAAK1B,IAAI,CAACC,GAAG,CAAC,GAAG,CAAED,IAAI,CAACyB,GAAG,CAACU,MAAM,CAACI,KAAK,CAAC,CAAC,KAAG,CAClDC,UAAU,CAAEL,MAAM,CAACI,KAAK,CAAG,CAAC,CAAG,MAAM,CAAG,GAC1C,CAAE,CACH,CAAC,CACC,CAAC,cACNzF,IAAA,SAAMgF,SAAS,8CAAAJ,MAAA,CACbS,MAAM,CAACI,KAAK,CAAG,CAAC,CAAG,gBAAgB,CACnCJ,MAAM,CAACI,KAAK,CAAG,CAAC,CAAG,cAAc,CAAG,eAAe,CAClD,CAAAV,QAAA,CACA,MAAO,CAAAM,MAAM,CAACI,KAAK,GAAK,QAAQ,CAAGJ,MAAM,CAACI,KAAK,CAACZ,OAAO,CAAC,CAAC,CAAC,CAAGQ,MAAM,CAACI,KAAK,CACtE,CAAC,EACJ,CAAC,CACLJ,MAAM,CAACM,KAAK,eACX3F,IAAA,MAAGgF,SAAS,CAAC,4BAA4B,CAAAD,QAAA,CAAEM,MAAM,CAACM,KAAK,CAAI,CAC5D,GAlCOL,GAmCL,CACN,CAAC,CACC,CAAC,CAGLxC,cAAc,eACb5C,KAAA,QAAK8E,SAAS,CAAC,kCAAkC,CAAAD,QAAA,eAC/C7E,KAAA,OAAI8E,SAAS,CAAC,0CAA0C,CAAAD,QAAA,eACtD/E,IAAA,CAACT,MAAM,EAACyF,SAAS,CAAC,SAAS,CAAE,CAAC,oDAEhC,EAAI,CAAC,cACL9E,KAAA,QAAK8E,SAAS,CAAC,gCAAgC,CAAAD,QAAA,eAC7C7E,KAAA,QAAA6E,QAAA,eACE/E,IAAA,SAAMgF,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,qBAAI,CAAM,CAAC,cAC3C7E,KAAA,MAAG8E,SAAS,CAAC,mBAAmB,CAAAD,QAAA,EAAEjC,cAAc,CAAC8C,QAAQ,CAACf,OAAO,CAAC,CAAC,CAAC,CAAC,GAAC,EAAG,CAAC,EACvE,CAAC,cACN3E,KAAA,QAAA6E,QAAA,eACE/E,IAAA,SAAMgF,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,sBAAK,CAAM,CAAC,cAC5C/E,IAAA,MAAGgF,SAAS,CAAC,mBAAmB,CAAAD,QAAA,CAAEjC,cAAc,CAAC+C,YAAY,CAAI,CAAC,EAC/D,CAAC,cACN3F,KAAA,QAAA6E,QAAA,eACE/E,IAAA,SAAMgF,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,eAAG,CAAM,CAAC,cAC1C/E,IAAA,MAAGgF,SAAS,CAAC,mBAAmB,CAAAD,QAAA,CAAEjC,cAAc,CAACgD,cAAc,CAAI,CAAC,EACjE,CAAC,EACH,CAAC,EACH,CACN,EACU,CAAC,EACV,CAAC,cAGP5F,KAAA,CAAC1B,IAAI,EAACwG,SAAS,CAAC,yBAAyB,CAAAD,QAAA,eACvC/E,IAAA,CAACtB,UAAU,EAAAqG,QAAA,cACT7E,KAAA,CAACvB,SAAS,EAACqG,SAAS,CAAC,sCAAsC,CAAAD,QAAA,eACzD/E,IAAA,CAACb,MAAM,EAAC6F,SAAS,CAAC,SAAS,CAAE,CAAC,kCAEhC,EAAW,CAAC,CACF,CAAC,cACb9E,KAAA,CAACzB,WAAW,EAAAsG,QAAA,eACV7E,KAAA,QAAK8E,SAAS,CAAC,uCAAuC,CAAAD,QAAA,eAEpD7E,KAAA,QAAK8E,SAAS,CAAC,0BAA0B,CAAAD,QAAA,eACvC7E,KAAA,QAAK8E,SAAS,CAAC,8BAA8B,CAAAD,QAAA,eAC3C/E,IAAA,OAAIgF,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,kBAAM,CAAI,CAAC,cACzC7E,KAAA,CAACtB,OAAO,EAAAmG,QAAA,eACN/E,IAAA,CAACjB,cAAc,EAAAgG,QAAA,cACb/E,IAAA,CAACZ,IAAI,EAAC4F,SAAS,CAAC,uBAAuB,CAAE,CAAC,CAC5B,CAAC,cACjB9E,KAAA,CAACrB,cAAc,EAACmG,SAAS,CAAC,UAAU,CAAAD,QAAA,eAClC/E,IAAA,MAAGgF,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAAEtF,eAAe,CAACsG,GAAG,CAACR,IAAI,CAAI,CAAC,cAChEvF,IAAA,MAAA+E,QAAA,CAAItF,eAAe,CAACsG,GAAG,CAACC,MAAM,CAAI,CAAC,EACrB,CAAC,EACV,CAAC,EACP,CAAC,cACN9F,KAAA,MAAG8E,SAAS,CAAC,iCAAiC,CAAAD,QAAA,GAAApE,qBAAA,CAC3CoC,YAAY,CAACiB,QAAQ,UAAArD,qBAAA,iBAArBA,qBAAA,CAAuBkE,OAAO,CAAC,CAAC,CAAC,CAAC,GACrC,EAAG,CAAC,cACJ3E,KAAA,MAAG8E,SAAS,CAAC,uBAAuB,CAAAD,QAAA,EAAC,0BAC1B,CAACP,SAAS,CAACzB,YAAY,CAACuB,WAAW,EAAI,CAAC,CAAC,EACjD,CAAC,EACD,CAAC,cAGNpE,KAAA,QAAK8E,SAAS,CAAC,2BAA2B,CAAAD,QAAA,eACxC7E,KAAA,QAAK8E,SAAS,CAAC,8BAA8B,CAAAD,QAAA,eAC3C/E,IAAA,OAAIgF,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,iCAAM,CAAI,CAAC,cACzC7E,KAAA,CAACtB,OAAO,EAAAmG,QAAA,eACN/E,IAAA,CAACjB,cAAc,EAAAgG,QAAA,cACb/E,IAAA,CAACZ,IAAI,EAAC4F,SAAS,CAAC,uBAAuB,CAAE,CAAC,CAC5B,CAAC,cACjB9E,KAAA,CAACrB,cAAc,EAACmG,SAAS,CAAC,UAAU,CAAAD,QAAA,eAClC/E,IAAA,MAAGgF,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAAEtF,eAAe,CAACwG,SAAS,CAACV,IAAI,CAAI,CAAC,cACtEvF,IAAA,MAAA+E,QAAA,CAAItF,eAAe,CAACwG,SAAS,CAACD,MAAM,CAAI,CAAC,EAC3B,CAAC,EACV,CAAC,EACP,CAAC,cACNhG,IAAA,MAAGgF,SAAS,CAAC,SAAS,CAAAD,QAAA,CAAC,6CAAQ,CAAG,CAAC,cACnC/E,IAAA,MAAGgF,SAAS,CAAC,mBAAmB,CAAAD,QAAA,CAAEP,SAAS,CAACzB,YAAY,CAACkB,SAAS,EAAI,CAAC,CAAC,CAAI,CAAC,cAC7E/D,KAAA,MAAG8E,SAAS,CAAC,4BAA4B,CAAAD,QAAA,EAAC,0CAC9B,CAACP,SAAS,CAACzB,YAAY,CAACsB,aAAa,EAAI,CAAC,CAAC,EACpD,CAAC,EACD,CAAC,cAGNnE,KAAA,QAAK8E,SAAS,CAAC,4BAA4B,CAAAD,QAAA,eACzC7E,KAAA,QAAK8E,SAAS,CAAC,8BAA8B,CAAAD,QAAA,eAC3C/E,IAAA,OAAIgF,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,2BAAK,CAAI,CAAC,cACxC7E,KAAA,CAACtB,OAAO,EAAAmG,QAAA,eACN/E,IAAA,CAACjB,cAAc,EAAAgG,QAAA,cACb/E,IAAA,CAACZ,IAAI,EAAC4F,SAAS,CAAC,uBAAuB,CAAE,CAAC,CAC5B,CAAC,cACjB9E,KAAA,CAACrB,cAAc,EAACmG,SAAS,CAAC,UAAU,CAAAD,QAAA,eAClC/E,IAAA,MAAGgF,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAAEtF,eAAe,CAACyG,MAAM,CAACX,IAAI,CAAI,CAAC,cACnEvF,IAAA,MAAA+E,QAAA,CAAItF,eAAe,CAACyG,MAAM,CAACF,MAAM,CAAI,CAAC,EACxB,CAAC,EACV,CAAC,EACP,CAAC,cACNhG,IAAA,MAAGgF,SAAS,CAAC,mCAAmC,CAAAD,QAAA,CAC7C,EAAAnE,qBAAA,CAAAmC,YAAY,CAACwB,WAAW,UAAA3D,qBAAA,iBAAxBA,qBAAA,CAA0BiE,OAAO,CAAC,CAAC,CAAC,GAAI,KAAK,CAC7C,CAAC,cACJ7E,IAAA,MAAGgF,SAAS,CAAC,uBAAuB,CAAAD,QAAA,CACjChC,YAAY,CAACwB,WAAW,CAAG,CAAC,CAAG,IAAI,CACnCxB,YAAY,CAACwB,WAAW,CAAG,CAAC,CAAG,IAAI,CACnCxB,YAAY,CAACwB,WAAW,CAAG,GAAG,CAAG,IAAI,CAAG,IAAI,CAC5C,CAAC,EACD,CAAC,EACH,CAAC,CAGLxB,YAAY,CAACiB,QAAQ,CAAG,CAAC,eACxB9D,KAAA,QAAK8E,SAAS,CAAC,8EAA8E,CAAAD,QAAA,eAC3F/E,IAAA,CAAChB,aAAa,EAACgG,SAAS,CAAC,sBAAsB,CAAE,CAAC,cAClDhF,IAAA,MAAGgF,SAAS,CAAC,0BAA0B,CAAAD,QAAA,CAAC,mIAExC,CAAG,CAAC,EACD,CACN,EACU,CAAC,EACV,CAAC,cAGP7E,KAAA,CAAC1B,IAAI,EAACwG,SAAS,CAAC,0BAA0B,CAAAD,QAAA,eACxC/E,IAAA,CAACtB,UAAU,EAAAqG,QAAA,cACT7E,KAAA,CAACvB,SAAS,EAACqG,SAAS,CAAC,uCAAuC,CAAAD,QAAA,eAC1D/E,IAAA,CAACd,UAAU,EAAC8F,SAAS,CAAC,SAAS,CAAE,CAAC,2DAEpC,EAAW,CAAC,CACF,CAAC,cACbhF,IAAA,CAACvB,WAAW,EAAAsG,QAAA,cACV7E,KAAA,QAAK8E,SAAS,CAAC,WAAW,CAAAD,QAAA,eAExB7E,KAAA,QAAK8E,SAAS,CAAC,yDAAyD,CAAAD,QAAA,eACtE/E,IAAA,OAAIgF,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAAC,wCAAQ,CAAI,CAAC,cAChD/E,IAAA,QAAKgF,SAAS,CAAC,uCAAuC,CAAAD,QAAA,CACnDoB,MAAM,CAACC,OAAO,CAACvE,eAAe,CAACE,SAAS,EAAI,CAAC,CAAC,CAAC,CAACqD,GAAG,CAACiB,KAAA,EAAkB,IAAjB,CAACC,GAAG,CAAEb,KAAK,CAAC,CAAAY,KAAA,CAChE,KAAM,CAAAE,MAAM,CAAG,CACbC,aAAa,CAAE,OAAO,CACtBC,WAAW,CAAE,KAAK,CAClBC,gBAAgB,CAAE,OAAO,CACzBC,QAAQ,CAAE,QAAQ,CAClBC,YAAY,CAAE,QAAQ,CACtBC,oBAAoB,CAAE,OAAO,CAC7BpE,YAAY,CAAE,OAChB,CAAC,CACD,mBACEvC,KAAA,QAAe8E,SAAS,CAAC,SAAS,CAAAD,QAAA,eAChC7E,KAAA,SAAM8E,SAAS,CAAC,eAAe,CAAAD,QAAA,EAC5BwB,MAAM,CAACD,GAAG,CAAC,EAAIA,GAAG,CAAC,GACtB,EAAM,CAAC,cACPtG,IAAA,SAAMgF,SAAS,mBAAAJ,MAAA,CACb,MAAO,CAAAa,KAAK,GAAK,QAAQ,EAAIA,KAAK,CAAG,CAAC,CAAG,gBAAgB,CACzD,MAAO,CAAAA,KAAK,GAAK,QAAQ,EAAIA,KAAK,CAAG,CAAC,CAAG,cAAc,CAAG,eAAe,CACxE,CAAAV,QAAA,CACA,MAAO,CAAAU,KAAK,GAAK,QAAQ,CAAGA,KAAK,CAACZ,OAAO,CAAC,CAAC,CAAC,CAAGY,KAAK,CACjD,CAAC,GATCa,GAUL,CAAC,CAEV,CAAC,CAAC,CACC,CAAC,EACH,CAAC,cAGNpG,KAAA,QAAK8E,SAAS,CAAC,wBAAwB,CAAAD,QAAA,eACrC7E,KAAA,QAAA6E,QAAA,eACE7E,KAAA,OAAI8E,SAAS,CAAC,0CAA0C,CAAAD,QAAA,EAAC,4DAEvD,cAAA7E,KAAA,CAACtB,OAAO,EAAAmG,QAAA,eACN/E,IAAA,CAACjB,cAAc,EAAAgG,QAAA,cACb/E,IAAA,CAACZ,IAAI,EAAC4F,SAAS,CAAC,uBAAuB,CAAE,CAAC,CAC5B,CAAC,cACjB9E,KAAA,CAACrB,cAAc,EAACmG,SAAS,CAAC,UAAU,CAAAD,QAAA,eAClC/E,IAAA,MAAA+E,QAAA,CAAG,sGAAoB,CAAG,CAAC,cAC3B/E,IAAA,MAAGgF,SAAS,CAAC,cAAc,CAAAD,QAAA,CAAC,qEAAiB,CAAG,CAAC,EACnC,CAAC,EACV,CAAC,EACR,CAAC,cACL7E,KAAA,QAAK8E,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxB7E,KAAA,QAAK8E,SAAS,CAAC,sBAAsB,CAAAD,QAAA,eACnC/E,IAAA,SAAA+E,QAAA,CAAM,oBAAG,CAAM,CAAC,cAChB/E,IAAA,SAAMgF,SAAS,cAAAJ,MAAA,CAAe,CAAC,EAAA/D,cAAA,CAAAe,MAAM,CAACkF,MAAM,UAAAjG,cAAA,iBAAbA,cAAA,CAAekG,KAAK,GAAI,CAAC,EAAI,CAAC,CAAG,cAAc,CAAG,eAAe,CAAG,CAAAhC,QAAA,CAChGP,SAAS,CAAC,EAAA1D,eAAA,CAAAc,MAAM,CAACkF,MAAM,UAAAhG,eAAA,iBAAbA,eAAA,CAAeiG,KAAK,GAAI,CAAC,CAAC,CACjC,CAAC,EACJ,CAAC,cACN7G,KAAA,QAAK8E,SAAS,CAAC,sBAAsB,CAAAD,QAAA,eACnC/E,IAAA,SAAA+E,QAAA,CAAM,cAAE,CAAM,CAAC,cACf/E,IAAA,SAAMgF,SAAS,cAAAJ,MAAA,CAAe,CAAC,EAAA7D,eAAA,CAAAa,MAAM,CAACkF,MAAM,UAAA/F,eAAA,iBAAbA,eAAA,CAAeiG,IAAI,GAAI,CAAC,EAAI,CAAC,CAAG,cAAc,CAAG,eAAe,CAAG,CAAAjC,QAAA,CAC/FP,SAAS,CAAC,EAAAxD,eAAA,CAAAY,MAAM,CAACkF,MAAM,UAAA9F,eAAA,iBAAbA,eAAA,CAAegG,IAAI,GAAI,CAAC,CAAC,CAChC,CAAC,EACJ,CAAC,EACH,CAAC,EACH,CAAC,cACN9G,KAAA,QAAA6E,QAAA,eACE7E,KAAA,OAAI8E,SAAS,CAAC,0CAA0C,CAAAD,QAAA,EAAC,iCAEvD,cAAA7E,KAAA,CAACtB,OAAO,EAAAmG,QAAA,eACN/E,IAAA,CAACjB,cAAc,EAAAgG,QAAA,cACb/E,IAAA,CAACZ,IAAI,EAAC4F,SAAS,CAAC,uBAAuB,CAAE,CAAC,CAC5B,CAAC,cACjB9E,KAAA,CAACrB,cAAc,EAACmG,SAAS,CAAC,UAAU,CAAAD,QAAA,eAClC/E,IAAA,MAAA+E,QAAA,CAAG,uEAAc,CAAG,CAAC,cACrB/E,IAAA,MAAGgF,SAAS,CAAC,cAAc,CAAAD,QAAA,CAAC,4GAAqB,CAAG,CAAC,EACvC,CAAC,EACV,CAAC,EACR,CAAC,cACL/E,IAAA,QAAKgF,SAAS,CAAC,WAAW,CAAAD,QAAA,cACxB7E,KAAA,QAAK8E,SAAS,CAAC,sBAAsB,CAAAD,QAAA,eACnC/E,IAAA,SAAA+E,QAAA,CAAM,oBAAG,CAAM,CAAC,cAChB/E,IAAA,SAAMgF,SAAS,cAAAJ,MAAA,CAAe,CAAC,EAAA3D,eAAA,CAAAW,MAAM,CAACkF,MAAM,UAAA7F,eAAA,iBAAbA,eAAA,CAAegG,EAAE,GAAI,CAAC,EAAI,CAAC,CAAG,cAAc,CAAG,eAAe,CAAG,CAAAlC,QAAA,CAC7FP,SAAS,CAAC,EAAAtD,eAAA,CAAAU,MAAM,CAACkF,MAAM,UAAA5F,eAAA,iBAAbA,eAAA,CAAe+F,EAAE,GAAI,CAAC,CAAC,CAC9B,CAAC,EACJ,CAAC,CACH,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,CACK,CAAC,EACV,CAAC,cAGP/G,KAAA,CAAC1B,IAAI,EAAAuG,QAAA,eACH/E,IAAA,CAACtB,UAAU,EAAAqG,QAAA,cACT7E,KAAA,CAACvB,SAAS,EAACqG,SAAS,CAAC,yBAAyB,CAAAD,QAAA,eAC5C/E,IAAA,CAACf,UAAU,EAAC+F,SAAS,CAAC,SAAS,CAAE,CAAC,kEAEpC,EAAW,CAAC,CACF,CAAC,cACb9E,KAAA,CAACzB,WAAW,EAAAsG,QAAA,eACV7E,KAAA,QAAK8E,SAAS,CAAC,uCAAuC,CAAAD,QAAA,eACpD7E,KAAA,QAAK8E,SAAS,CAAC,8DAA8D,CAAAD,QAAA,eAC3E7E,KAAA,OAAI8E,SAAS,CAAC,0CAA0C,CAAAD,QAAA,EAAC,8CAEvD,cAAA7E,KAAA,CAACtB,OAAO,EAAAmG,QAAA,eACN/E,IAAA,CAACjB,cAAc,EAAAgG,QAAA,cACb/E,IAAA,CAACZ,IAAI,EAAC4F,SAAS,CAAC,uBAAuB,CAAE,CAAC,CAC5B,CAAC,cACjB9E,KAAA,CAACrB,cAAc,EAACmG,SAAS,CAAC,UAAU,CAAAD,QAAA,eAClC/E,IAAA,MAAA+E,QAAA,CAAG,6DAAwB,CAAG,CAAC,cAC/B/E,IAAA,MAAA+E,QAAA,CAAG,wDAAmB,CAAG,CAAC,EACZ,CAAC,EACV,CAAC,EACR,CAAC,cACL/E,IAAA,MAAGgF,SAAS,CAAC,wCAAwC,CAAAD,QAAA,CAClDP,SAAS,CAAC9B,eAAe,CAACC,IAAI,CAAC,CAC/B,CAAC,cACJ3C,IAAA,QAAKgF,SAAS,CAAC,iCAAiC,CAAAD,QAAA,EAAA5D,qBAAA,CAC7CuB,eAAe,CAACG,SAAS,UAAA1B,qBAAA,iBAAzBA,qBAAA,CAA2BiE,GAAG,CAAC,CAAC8B,MAAM,CAAE5B,GAAG,GAAK,CAC/C,KAAM,CAAA6B,YAAY,CAAG,CACnB,gBAAgB,CAAE,UAAU,CAC5B,uBAAuB,CAAE,QAAQ,CACjC,UAAU,CAAE,IAAI,CAChB,oBAAoB,CAAE,WAAW,CACjC,wBAAwB,CAAE,WAAW,CACrC,eAAe,CAAE,eACnB,CAAC,CACD,GAAI,CAAAC,gBAAgB,CAAGF,MAAM,CAC7Bf,MAAM,CAACC,OAAO,CAACe,YAAY,CAAC,CAACE,OAAO,CAACC,KAAA,EAAgB,IAAf,CAACC,GAAG,CAAEC,GAAG,CAAC,CAAAF,KAAA,CAC9CF,gBAAgB,CAAGA,gBAAgB,CAACK,OAAO,CAACF,GAAG,CAAEC,GAAG,CAAC,CACvD,CAAC,CAAC,CACF,mBAAOtH,KAAA,MAAA6E,QAAA,EAAa,SAAE,CAACqC,gBAAgB,GAAxB9B,GAA4B,CAAC,CAC9C,CAAC,CAAC,CACC,CAAC,EACH,CAAC,cAENpF,KAAA,QAAK8E,SAAS,CAAC,2DAA2D,CAAAD,QAAA,eACxE7E,KAAA,OAAI8E,SAAS,CAAC,0CAA0C,CAAAD,QAAA,EAAC,8CAEvD,cAAA7E,KAAA,CAACtB,OAAO,EAAAmG,QAAA,eACN/E,IAAA,CAACjB,cAAc,EAAAgG,QAAA,cACb/E,IAAA,CAACZ,IAAI,EAAC4F,SAAS,CAAC,uBAAuB,CAAE,CAAC,CAC5B,CAAC,cACjB9E,KAAA,CAACrB,cAAc,EAACmG,SAAS,CAAC,UAAU,CAAAD,QAAA,eAClC/E,IAAA,MAAA+E,QAAA,CAAG,uEAAc,CAAG,CAAC,cACrB/E,IAAA,MAAA+E,QAAA,CAAG,mFAAgB,CAAG,CAAC,EACT,CAAC,EACV,CAAC,EACR,CAAC,cACL7E,KAAA,QAAK8E,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxB7E,KAAA,QAAA6E,QAAA,eACE/E,IAAA,SAAMgF,SAAS,CAAC,uBAAuB,CAAAD,QAAA,CAAC,qBAAI,CAAM,CAAC,cACnD/E,IAAA,MAAGgF,SAAS,CAAC,wBAAwB,CAAAD,QAAA,CAClC,EAAA3D,sBAAA,CAAAa,aAAa,CAACI,cAAc,UAAAjB,sBAAA,iBAA5BA,sBAAA,CAA8BsG,QAAQ,GAAI,SAAS,CACnD,CAAC,EACD,CAAC,cACNxH,KAAA,QAAA6E,QAAA,eACE/E,IAAA,SAAMgF,SAAS,CAAC,uBAAuB,CAAAD,QAAA,CAAC,4BAAM,CAAM,CAAC,cACrD/E,IAAA,MAAGgF,SAAS,CAAC,2BAA2B,CAAAD,QAAA,CACrC,EAAA1D,sBAAA,CAAAY,aAAa,CAACI,cAAc,UAAAhB,sBAAA,iBAA5BA,sBAAA,CAA8B4D,gBAAgB,GAAI,OAAO,CACzD,CAAC,EACD,CAAC,cACN/E,KAAA,QAAA6E,QAAA,eACE/E,IAAA,SAAMgF,SAAS,CAAC,uBAAuB,CAAAD,QAAA,CAAC,kCAAO,CAAM,CAAC,cACtD7E,KAAA,MAAG8E,SAAS,CAAC,WAAW,CAAAD,QAAA,EACrB,EAAAzD,qBAAA,CAAAW,aAAa,CAAC0F,cAAc,UAAArG,qBAAA,iBAA5BA,qBAAA,CAA8BuD,OAAO,CAAC,CAAC,CAAC,GAAI,MAAM,CAAC,GACtD,EAAG,CAAC,EACD,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,CAGLpC,YAAY,GAAK,iBAAiB,eACjCvC,KAAA,QAAK8E,SAAS,CAAC,oFAAoF,CAAAD,QAAA,eACjG/E,IAAA,CAACR,WAAW,EAACwF,SAAS,CAAC,uCAAuC,CAAE,CAAC,cACjE9E,KAAA,MAAG8E,SAAS,CAAC,yBAAyB,CAAAD,QAAA,EAAC,wGACf,CAAC,CAAC,CAAC,CAAC,EAAI9C,aAAa,CAAC0F,cAAc,EAAI,GAAG,CAAC,EAAI,GAAG,EAAE9C,OAAO,CAAC,CAAC,CAAC,CAAC,+CACxF,EAAG,CAAC,EACD,CACN,CAEA9B,YAAY,CAACiB,QAAQ,CAAG,CAAC,eACxB9D,KAAA,QAAK8E,SAAS,CAAC,8EAA8E,CAAAD,QAAA,eAC3F/E,IAAA,CAAChB,aAAa,EAACgG,SAAS,CAAC,oCAAoC,CAAE,CAAC,cAChEhF,IAAA,MAAGgF,SAAS,CAAC,sBAAsB,CAAAD,QAAA,CAAC,0JAEpC,CAAG,CAAC,EACD,CACN,EACU,CAAC,EACV,CAAC,EACJ,CAAC,CACS,CAAC,CAEtB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}